<%- include('partials/head.ejs') %>
     <%- include('partials/navbar.ejs') %>

          <div class="container mt-5" style="max-width: 800px;">
               <h1 class="text-center mb-4" style="color: #000;">Créer une nouvelle annonce</h1>

               <% if (typeof message !=='undefined' && message) { %>
                    <div class="alert alert-danger">
                         <%= message %>
                    </div>
                    <% } %>

                         <form action="/announcements" method="POST" enctype="multipart/form-data" id="announcementForm" novalidate>
                              <!-- Dog Breed Input -->
                              <div class="mb-3">
                                   <label for="breed" class="form-label">
                                        <i class="bi bi-list-stars"></i> Race de chien
                                   </label>
                                   <input type="text" class="form-control" id="breed" name="breed" required>
                                   <div class="invalid-feedback">La race de chien est obligatoire.</div>
                              </div>

                              <!-- Price -->
                              <div class="mb-3">
                                   <label for="price" class="form-label">
                                        <i class="bi bi-cash"></i> Prix (DH)
                                   </label>
                                   <input type="number" class="form-control" id="price" name="price" min="0" required>
                                   <span class="badge bg-danger">0 DH = Chien Pour Adoption</span>
                                   <div class="invalid-feedback">Le prix est obligatoire et doit être un nombre positif.</div>
                              </div>

                              <!-- Location -->
                              <div class="mb-3">
                                   <label for="location" class="form-label">
                                        <i class="bi bi-geo-alt"></i> Lieu
                                   </label>
                                   <select class="form-select" id="location" name="location" required>
                                        <option value="" selected disabled>Choisissez un lieu</option>
                                        <option value="Rabat">Rabat</option>
                                        <option value="Casablanca">Casablanca</option>
                                        <option value="Marrakech">Marrakech</option>
                                        <!-- Add more options as needed -->
                                   </select>
                                   <div class="invalid-feedback">Le lieu est obligatoire.</div>
                              </div>

                              <!-- Phone Number -->
                              <div class="mb-3">
                                   <label for="number" class="form-label">
                                        <i class="bi bi-telephone"></i> Numéro de Whatsapp
                                   </label>
                                   <input type="tel" class="form-control" id="number" name="number" pattern="^0[5-7][0-9]{8}$" required>
                                   <div class="invalid-feedback">Le numéro est obligatoire et doit être au format valide (ex: 0612345678).</div>
                              </div>

                              <!-- Description -->
                              <div class="mb-3">
                                   <label for="description" class="form-label">
                                        <i class="bi bi-file-text"></i> Description
                                   </label>
                                   <textarea class="form-control" id="description" name="description" rows="4" required></textarea>
                                   <div class="invalid-feedback">La description est obligatoire.</div>
                              </div>

                              <!-- Media Upload -->
                              <div class="mb-3">
                                   <label for="media" class="form-label">
                                        <i class="bi bi-image"></i> Images/Videos
                                   </label>
                                   <input type="file" class="form-control" id="media" name="media" multiple accept="image/*, video/*" required>
                                   <div class="invalid-feedback">Veuillez sélectionner au moins une image ou vidéo.</div>
                              </div>

                              <!-- Submit Button -->
                              <button type="submit" class="btn btn-primary btn-lg btn-block">
                                   <i class="bi bi-send"></i> Publier l'annonce
                              </button>
                         </form>
          </div>

          <%- include('partials/footer.ejs') %>

               <script>
                    // Form validation script
                    (function () {
                         'use strict'
                         var form = document.getElementById('announcementForm')
                         form.addEventListener('submit', function (event) {
                              if (!form.checkValidity()) {
                                   event.preventDefault()
                                   event.stopPropagation()
                              }
                              form.classList.add('was-validated')
                         }, false)
                    })()
               </script>