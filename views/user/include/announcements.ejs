<!-- Pet Announcements Slider Section -->
<section class="pet-announcements py-5">
     <div class="container">
          <h2 class="section-title text-center mb-4">Dernières Annonces</h2>

          <div class="position-relative announcement-slider-container">
               <div class="swiper-container announcement-slider">
                    <div class="swiper-wrapper">
                         <% announcements.forEach(announcement=> { %>
                              <div class="swiper-slide">
                                   <div class="card announcement-card h-100">
                                        <img src="<%= announcement.images[0] %>" alt="<%= announcement.title %>" class="card-img-top announcement-image">
                                        <div class="card-body d-flex flex-column">
                                             <span class="category-label mb-2">
                                                  <%= announcement.category || 'Chiot' %>
                                             </span>
                                             <h5 class="card-title">
                                                  <%= announcement.title %>
                                             </h5>
                                             <ul class="puppy-details list-unstyled mb-3">
                                                  <li><i class="fas fa-paw"></i>
                                                       <%= announcement.breed %>
                                                  </li>
                                                  <li><i class="fas fa-birthday-cake"></i>
                                                       <%= announcement.age %>
                                                  </li>
                                                  <li><i class="fas fa-map-marker-alt"></i>
                                                       <%= announcement.location %>
                                                  </li>
                                             </ul>
                                             <p class="card-text flex-grow-1">
                                                  <%= announcement.description.substring(0, 60) %>...
                                             </p>
                                             <a href="/announcement/<%= announcement._id %>" class="btn btn-add-interest mt-auto">Voir Détails</a>
                                        </div>
                                   </div>
                              </div>
                              <% }) %>
                    </div>
               </div>
               <div class="slider-nav">
                    <button class="slider-nav-btn slider-nav-prev">
                         <i class="fas fa-chevron-left"></i>
                    </button>
                    <button class="slider-nav-btn slider-nav-next">
                         <i class="fas fa-chevron-right"></i>
                    </button>
               </div>
          </div>

          <div class="text-center mt-4">
               <a href="/tous-les-annonces" class="btn btn-primary">Voir toutes les annonces</a>
          </div>
     </div>
</section>

<style>
     .pet-announcements {
          background-color: #E6E6FA;
          position: relative;
          overflow: hidden;
     }

     .pet-announcements::before {
          content: "";
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><circle cx="50" cy="50" r="1" fill="%23FFFFFF" opacity="0.5"/></svg>');
          opacity: 0.3;
          z-index: 0;
     }

     .pet-announcements .container {
          position: relative;
          z-index: 1;
     }

     .section-title {
          color: #333;
          font-weight: 600;
     }

     .announcement-slider-container {
          overflow: hidden;
          padding: 20px 0;
     }

     .announcement-card {
          border-radius: 20px;
          box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
          overflow: hidden;
          transition: transform 0.3s ease, box-shadow 0.3s ease;
     }

     .announcement-card:hover {
          transform: translateY(-5px);
          box-shadow: 0 6px 15px rgba(0, 0, 0, 0.15);
     }

     .announcement-image {
          height: 200px;
          object-fit: cover;
     }

     .category-label {
          background-color: #ffb6c100;
          color: #333;
          padding: 5px 15px;
          border-radius: 15px;
          font-size: 0.9em;
          font-weight: 600;
          display: inline-block;
     }

     .card-title {
          font-size: 1.1rem;
          font-weight: 600;
          margin-top: 0.5rem;
     }

     .puppy-details li {
          font-size: 0.9rem;
          color: #666;
          margin-bottom: 0.25rem;
     }

     .puppy-details i {
          width: 20px;
          color: #373686;
          margin-right: 5px;
     }

     .card-text {
          font-size: 0.9rem;
          color: #666;
     }

     .btn-add-interest {
          background-color: #e7e7e7;
          color: rgb(58, 58, 58);
          border: none;
          padding: 10px 20px;
          border-radius: 20px;
          font-weight: bold;
          transition: background-color 0.3s ease;
     }

     .btn-add-interest:hover {
          background-color: #b3b3b3;
          color: #333;
     }

     .slider-nav {
          position: absolute;
          top: 50%;
          left: 0;
          z-index: 10;
          right: 0;
          transform: translateY(-50%);
          display: flex;
          justify-content: space-between;
          pointer-events: none;
     }

     .slider-nav-btn {
          background-color: rgba(255, 141, 141, 0.8);
          color: #ffffff;
          width: 40px;
          height: 40px;
          border-radius: 50%;
          border: none;
          display: flex;
          justify-content: center;
          align-items: center;
          cursor: pointer;
          transition: background-color 0.3s ease;
          pointer-events: auto;
     }

     .slider-nav-btn:hover {
          background-color: rgb(141, 24, 59);
     }

     @media (max-width: 768px) {
          .announcement-slider .swiper-slide {
               width: 85%;
          }
     }
</style>

<script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
<link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">

<script>
     document.addEventListener('DOMContentLoaded', function () {
          const swiper = new Swiper('.announcement-slider', {
               slidesPerView: 'auto',
               spaceBetween: 20,
               loop: true,
               centeredSlides: true,
               breakpoints: {
                    320: {
                         slidesPerView: 1.2,
                    },
                    640: {
                         slidesPerView: 2,
                    },
                    1024: {
                         slidesPerView: 3,
                    },
               },
               autoplay: {
                    delay: 3000,
                    disableOnInteraction: false,
               },
          });

          document.querySelector('.slider-nav-prev').addEventListener('click', () => {
               swiper.slidePrev();
          });
          document.querySelector('.slider-nav-next').addEventListener('click', () => {
               swiper.slideNext();
          });
     });
</script>