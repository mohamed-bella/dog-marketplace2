<%- include('../marketplace/partials/head.ejs') %>
     <%- include('partials/navbar.ejs') %>

          <div class="container mt-5">
               <h1 class="text-center mb-4">Gestion des Articles</h1>

               <!-- Button to Create a New Article -->
               <div class="text-end mb-4">
                    <a href="/admin/articles/new" class="btn btn-primary">
                         <i class="fas fa-plus"></i> Créer un nouvel article
                    </a>
               </div>

               <!-- Articles Table -->
               <table class="table table-bordered table-hover">
                    <thead class="thead-dark">
                         <tr>
                              <th scope="col">Titre</th>
                              <th scope="col">Date de création</th>
                              <th scope="col" class="text-center">Actions</th>
                         </tr>
                    </thead>
                    <tbody>
                         <% if (articles.length> 0) { %>
                              <% articles.forEach(article=> { %>
                                   <tr>
                                        <td>
                                             <%= article.title %>
                                        </td>
                                        <td>
                                             <%= article.dateCreated.toLocaleDateString('fr-FR') %>
                                        </td>
                                        <td class="text-center">
                                             <a href="/admin/articles/<%= article._id %>/edit" class="btn btn-warning btn-sm">
                                                  <i class="fas fa-edit"></i> Modifier
                                             </a>
                                             <form action="/admin/articles/<%= article._id %>" method="POST" style="display: inline;">
                                                  <button type="submit" class="btn btn-danger btn-sm" onclick="return confirm('Êtes-vous sûr de vouloir supprimer cet article ?');">
                                                       <i class="fas fa-trash-alt"></i> Supprimer
                                                  </button>
                                             </form>
                                        </td>
                                   </tr>
                                   <% }) %>
                                        <% } else { %>
                                             <tr>
                                                  <td colspan="3" class="text-center">Aucun article disponible.</td>
                                             </tr>
                                             <% } %>
                    </tbody>
               </table>
          </div>

          <%- include('../marketplace/partials/footer.ejs') %>