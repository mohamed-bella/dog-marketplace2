<!-- views/includes/navbar.ejs -->
<div class="relative" x-data="{ sidebarOpen: false, userMenuOpen: false }">
  <!-- Fixed Top Navbar -->
  <header class="fixed top-0 inset-x-0 h-16 bg-black text-white z-30">
      <div class="flex items-center justify-between h-full px-4 lg:px-8">
          <!-- Left Section -->
          <div class="flex items-center gap-4">
              <!-- Mobile Menu Button -->
              <button @click="sidebarOpen = true" 
                      class="lg:hidden p-2 rounded-lg text-gray-400 hover:text-white hover:bg-red-600/10">
                  <i class="fas fa-bars text-xl"></i>
              </button>

              <!-- Logo -->
              <a href="/" class="flex items-center" aria-label="Accueil Dresseur.ma">
                  <div class="text-xl lg:text-2xl font-bold tracking-tight">
                      <span class="text-white">Dresseur</span>
                      <span class="text-red-600">.ma</span>
                  </div>
              </a>
          </div>

          <!-- Center Navigation (Desktop Only) -->
          <nav class="hidden lg:flex items-center gap-6">
              <% const topNavLinks = [
                  { href: '/dresseurs', label: 'Trouver un Dresseur', icon: 'search' },
                  { href: '/blog', label: 'Guide', icon: 'book-open' },
                  { href: '/contact', label: 'Contact', icon: 'envelope' }
              ] %>

              <% topNavLinks.forEach(link => { %>
                  <a href="<%= link.href %>" 
                     class="flex items-center gap-2 text-gray-300 hover:text-white 
                            transition-colors duration-200">
                      <i class="fas fa-<%= link.icon %> text-gray-500 group-hover:text-red-500"></i>
                      <span class="font-medium"><%= link.label %></span>
                  </a>
              <% }) %>
          </nav>

          <!-- Right Section -->
          <div class="flex items-center gap-4">
              <% if (!user) { %>
                  <a href="/auth/google" 
                     class="hidden lg:flex items-center justify-center gap-2 py-2 px-4
                            bg-red-600 text-white rounded-lg hover:bg-red-700 
                            transition-all duration-200 font-medium">
                      <i class="fab fa-google"></i>
                      <span>Connexion</span>
                  </a>
              <% } else { %>
                  <button @click="userMenuOpen = !userMenuOpen"
                          class="relative flex items-center gap-2 p-1 rounded-lg hover:bg-white/10
                                 transition-colors duration-200">
                      <img src="<%= user.profileImage || '/images/default-avatar.png' %>" 
                           alt="Profile" 
                           class="h-8 w-8 rounded-full ring-2 ring-red-600">
                      <span class="hidden lg:block text-sm font-medium text-white">
                          <%= user.displayName.split(' ')[0] %>
                      </span>
                      <i class="hidden lg:block fas fa-chevron-down text-xs text-gray-400"></i>

                      <!-- Dropdown Menu -->
                      <div x-show="userMenuOpen"
                           @click.away="userMenuOpen = false"
                           class="absolute right-0 top-full mt-2 w-48 bg-white rounded-xl shadow-lg
                                  border border-gray-200 overflow-hidden">
                          <div class="py-2">
                              <a href="/dashboard" class="flex items-center gap-2 px-4 py-2 text-gray-700 hover:bg-gray-50">
                                  <i class="fas fa-user-circle w-5"></i>
                                  <span>Mon Profil</span>
                              </a>
                              <a href="/reservations" class="flex items-center gap-2 px-4 py-2 text-gray-700 hover:bg-gray-50">
                                  <i class="fas fa-calendar w-5"></i>
                                  <span>R√©servations</span>
                              </a>
                              <a href="/parametres" class="flex items-center gap-2 px-4 py-2 text-gray-700 hover:bg-gray-50">
                                  <i class="fas fa-cog w-5"></i>
                                  <span>Param√®tres</span>
                              </a>
                              <hr class="my-1 border-gray-200">
                              <a href="/logout" class="flex items-center gap-2 px-4 py-2 text-red-600 hover:bg-red-50">
                                  <i class="fas fa-sign-out-alt w-5"></i>
                                  <span>D√©connexion</span>
                              </a>
                          </div>
                      </div>
                  </button>
              <% } %>
          </div>
      </div>
  </header>

  <!-- Desktop Sidebar -->
  <aside class="hidden lg:flex fixed left-0 top-16 h-[calc(100vh-4rem)] w-64 bg-white border-r border-gray-200 z-20">
      <div class="flex flex-col w-full">
          <!-- Search Bar -->
          <div class="p-4 border-b border-gray-200">
              <div class="relative">
                  <input type="text" 
                         placeholder="Rechercher..." 
                         class="w-full pl-10 pr-4 py-2 rounded-lg bg-gray-50 border border-gray-200
                                focus:bg-white focus:border-red-600 focus:ring-1 focus:ring-red-600">
                  <i class="fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
              </div>
          </div>

          <!-- Categories Section -->
          <div class="flex-1 px-4 py-6 overflow-y-auto">
              <h3 class="text-sm font-semibold text-gray-400 uppercase tracking-wider mb-4">Sp√©cialit√©s</h3>
              <div class="space-y-1">
                <% const profileCategories = [
    { 
        id: 'tous', 
        emoji: 'üêæ', 
        label: 'Toutes Sp√©cialit√©s' 
    },
    { 
        id: 'comportementaliste', 
        emoji: 'üß†', 
        label: 'Comportementaliste' 
    },
    { 
        id: 'attaque', 
        emoji: 'üõ°Ô∏è', 
        label: 'Attaque' 
    },
    { 
        id: 'discipline', 
        emoji: 'üìù', 
        label: 'Discipline' 
    },
    { 
        id: 'freestyle', 
        emoji: 'üèÉ', 
        label: 'Freestyle' 
    }
];
const currentCategory = 'tous';
%>

                  <% profileCategories.forEach(category => { 
                      const isActive = currentCategory === category.id;
                  %>
                      <a href="/dresseur/<%= category.id %>"
                         class="flex items-center gap-3 px-4 py-2.5 rounded-lg transition-all duration-200
                                <%= isActive ? 
                                  'bg-red-50 text-red-600' : 
                                  'text-gray-700 hover:bg-gray-50' %>">
                          <span class="text-lg w-6 text-center"><%= category.emoji %></span>
                          <span class="font-medium text-sm"><%= category.label %></span>
                      </a>
                  <% }) %>
              </div>
          </div>

          <!-- Pro Button -->
          <div class="p-4 border-t border-gray-200">
              <a href="/devenir-dresseur" 
                 class="flex items-center justify-center gap-2 w-full py-2.5 px-4
                        bg-black text-white rounded-lg hover:bg-gray-900 
                        transition-all duration-200 font-medium">
                  <i class="fas fa-user-tie"></i>
                  <span>Devenir Dresseur Pro</span>
              </a>
          </div>
      </div>
  </aside>

  <!-- Mobile Sidebar -->
  <div x-show="sidebarOpen" 
       class="lg:hidden fixed inset-0 z-40"
       x-transition:enter="transition-opacity ease-linear duration-300"
       x-transition:enter-start="opacity-0"
       x-transition:enter-end="opacity-100">
      
      <div class="fixed inset-0 bg-black/75" @click="sidebarOpen = false"></div>

      <div class="fixed inset-y-0 left-0 w-full max-w-xs bg-white"
           x-transition:enter="transition ease-in-out duration-300 transform"
           x-transition:enter-start="-translate-x-full"
           x-transition:enter-end="translate-x-0">
          
          <div class="flex flex-col h-full">
              <!-- Mobile Sidebar Header -->
              <div class="h-16 flex items-center justify-between px-6 border-b border-gray-200">
                  <h2 class="text-xl font-bold text-gray-900">Menu</h2>
                  <button @click="sidebarOpen = false" 
                          class="p-2 rounded-lg text-gray-400 hover:text-gray-500 hover:bg-gray-100">
                      <i class="fas fa-times text-xl"></i>
                  </button>
              </div>

              <!-- Mobile Search -->
              <div class="p-4 border-b border-gray-200">
                  <div class="relative">
                      <input type="text" 
                             placeholder="Rechercher..." 
                             class="w-full pl-10 pr-4 py-2 rounded-lg bg-gray-50 border border-gray-200
                                    focus:bg-white focus:border-red-600 focus:ring-1 focus:ring-red-600">
                      <i class="fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                  </div>
              </div>

              <!-- Mobile Navigation -->
              <div class="flex-1 px-4 py-6 overflow-y-auto">
                  <!-- Categories -->
                  <div class="grid grid-cols-2 gap-3">
                      <% profileCategories.slice(0, 6).forEach(category => { 
                          const isActive = currentCategory === category.id;
                      %>
                          <a href="/dresseur/<%= category.id %>"
                             class="flex flex-col items-center p-4 rounded-xl border border-gray-200
                                    transition-all duration-200 hover:border-red-600 hover:bg-red-50
                                    <%= isActive ? 'bg-red-50 border-red-600' : '' %>">
                              <span class="text-2xl mb-2"><%= category.emoji %></span>
                              <span class="font-medium text-sm text-center"><%= category.label %></span>
                          </a>
                      <% }) %>
                  </div>

                  <!-- Navigation Links -->
                  <div class="mt-8 space-y-2">
                      <% topNavLinks.forEach(link => { %>
                          <a href="<%= link.href %>" 
                             class="flex items-center gap-3 px-4 py-3 rounded-lg
                                    text-gray-700 hover:bg-gray-50">
                              <i class="fas fa-<%= link.icon %> w-6"></i>
                              <span class="font-medium"><%= link.label %></span>
                          </a>
                      <% }) %>
                  </div>
              </div>

              <!-- Mobile Footer -->
              <div class="p-4 border-t border-gray-200">
                  <% if (!user) { %>
                      <a href="/auth/google" 
                         class="flex items-center justify-center gap-2 w-full py-3 px-4
                                bg-red-600 text-white rounded-lg hover:bg-red-700 
                                transition-all duration-200 font-medium">
                          <i class="fab fa-google"></i>
                          <span>Connexion</span>
                      </a>
                  <% } else { %>
                      <div class="flex items-center gap-3 p-2">
                          <img src="<%= user.profileImage || '/images/default-avatar.png' %>" 
                               alt="Profile" 
                               class="h-10 w-10 rounded-full">
                          <div class="flex-1 min-w-0">
                              <p class="text-sm font-medium text-gray-900 truncate">
                                  <%= user.displayName %>
                              </p>
                              <p class="text-xs text-gray-500 truncate">
                                  <%= user.email %>
                              </p>
                          </div>
                      </div>
                  <% } %>
              </div>
          </div>
      </div>
  </div>
</div>

<!-- Spacer for fixed header -->
<div class="h-16"></div>

