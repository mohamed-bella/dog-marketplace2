<!-- Modern Providers Section -->
<section class="py-8">
     <div class="max-w-7xl mx-auto px-4">
          <!-- Header -->
          <div class="flex items-center justify-between mb-8">
               <h2 class="text-3xl font-bold text-gray-900">Prestataires Vérifiés</h2>
          </div>

          <!-- Modern Profile Slider -->
          <div class="providers-slider relative">
               <!-- Slider Track -->
               <div class="slider-track">
                    <div class="slider-content">
                         <% topProviders.forEach(provider=> { %>
                              <div class="profile-item">
                                   <a href="/@<%= provider.slug %>" target="_blank" rel="noopener noreferrer" class="profile-link">
                                        <div class="profile-image-wrapper">
                                             <img src="<%= provider.profileImage || '/default-avatar.png' %>" alt="<%= provider.displayName %>" class="profile-image" loading="lazy" />
                                             <% if (provider.isVerified) { %>
                                                  <div class="verified-badge">
                                                       <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                                                       </svg>
                                                  </div>
                                                  <% } %>
                                        </div>
                                        <span class="profile-name">
                                             <%= provider.displayName %>
                                        </span>
                                   </a>
                              </div>
                              <% }) %>

                                   <!-- View All Profile Card -->
                                   <div class="profile-item view-all-item">
                                        <a href="/providers" class="profile-link">
                                             <div class="profile-image-wrapper view-all-wrapper">
                                                  <div class="view-all-circle">
                                                       <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                                                       </svg>
                                                  </div>
                                             </div>
                                             <span class="profile-name">Voir tous</span>
                                        </a>
                                   </div>
                    </div>
               </div>
          </div>
     </div>
</section>

<style>
     .providers-slider {
          position: relative;
          overflow: hidden;
          padding: 0.5rem;
     }

     .slider-track {
          overflow-x: auto;
          overflow-y: hidden;
          margin: 0 -2rem;
          padding: 1rem 2rem;
          -webkit-overflow-scrolling: touch;
          scrollbar-width: none;
          /* Firefox */
          -ms-overflow-style: none;
          /* IE and Edge */
     }

     .slider-track::-webkit-scrollbar {
          display: none;
          /* Chrome, Safari, Opera */
     }

     .slider-content {
          display: flex;
          gap: 1.5rem;
          padding-right: 2rem;
          /* Space for the last item */
     }

     .profile-item {
          flex: 0 0 auto;
          width: 90px;
          text-align: center;
     }

     .profile-link {
          display: block;
          text-decoration: none;
          cursor: pointer;
     }

     .profile-link:focus {
          outline: none;
     }

     .profile-link:focus .profile-image,
     .profile-link:focus .view-all-circle {
          border-color: #3b82f6;
          box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
     }

     .profile-image-wrapper {
          position: relative;
          width: 90px;
          height: 90px;
          margin-bottom: 0.75rem;
          border-radius: 9999px;
          overflow: hidden;
     }

     .profile-image {
          width: 100%;
          height: 100%;
          object-fit: cover;
          border-radius: 9999px;
          border: 2px solid transparent;
          transition: all 0.3s ease;
     }

     .profile-item:hover .profile-image {
          transform: scale(1.05);
          border-color: #3b82f6;
          box-shadow: 0 8px 20px -8px rgba(59, 130, 246, 0.5);
     }

     .verified-badge {
          position: absolute;
          bottom: 0;
          right: 0;
          width: 20px;
          height: 20px;
          background: #3b82f6;
          border-radius: 50%;
          z-index: 6;
          display: flex;
          align-items: center;
          justify-content: center;
          color: white;
          border: 2px solid white;
          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
          z-index: 1;
     }

     .profile-name {
          display: block;
          font-size: 0.875rem;
          font-weight: 500;
          color: #1f2937;
          white-space: nowrap;
          overflow: hidden;
          text-overflow: ellipsis;
          transition: color 0.3s ease;
     }

     .profile-item:hover .profile-name {
          color: #3b82f6;
     }

     /* View All Styles */
     .view-all-wrapper {
          background: #f3f4f6;
          display: flex;
          align-items: center;
          justify-content: center;
          transition: all 0.1s ease;
     }

     .view-all-circle {
          width: 90px;
          height: 90px;
          border-radius: 9999px;
          background: #f3f4f6;
          border: 2px solid transparent;
          display: flex;
          align-items: center;
          justify-content: center;
          color: #6b7280;
          transition: all 0.3s ease;
     }

     .view-all-item:hover .view-all-circle {
          background: #e5e7eb;
          color: #3b82f6;
          transform: scale(1.05);
          border-color: #3b82f6;
          box-shadow: 0 8px 20px -8px rgba(59, 130, 246, 0.5);
     }

     @media (max-width: 640px) {
          .profile-item {
               width: 70px;
          }

          .profile-image-wrapper,
          .view-all-circle {
               width: 70px;
               height: 70px;
          }
     }

     /* Add smooth scroll behavior */
     @media (prefers-reduced-motion: no-preference) {
          .slider-track {
               scroll-behavior: smooth;
          }
     }
</style>

<script>
     document.addEventListener('DOMContentLoaded', () => {
          const sliderTrack = document.querySelector('.slider-track');
          let isDown = false;
          let startX;
          let scrollLeft;

          // Mouse events
          sliderTrack.addEventListener('mousedown', (e) => {
               if (e.button !== 0) return; // Only handle left click
               isDown = true;
               startX = e.pageX - sliderTrack.offsetLeft;
               scrollLeft = sliderTrack.scrollLeft;
               sliderTrack.style.cursor = 'grabbing';
               e.preventDefault();
          });

          sliderTrack.addEventListener('mouseleave', () => {
               isDown = false;
               sliderTrack.style.cursor = 'grab';
          });

          sliderTrack.addEventListener('mouseup', () => {
               isDown = false;
               sliderTrack.style.cursor = 'grab';
          });

          sliderTrack.addEventListener('mousemove', (e) => {
               if (!isDown) return;
               e.preventDefault();
               const x = e.pageX - sliderTrack.offsetLeft;
               const walk = (x - startX) * 2;
               sliderTrack.scrollLeft = scrollLeft - walk;
          });

          // Touch events
          sliderTrack.addEventListener('touchstart', (e) => {
               startX = e.touches[0].pageX - sliderTrack.offsetLeft;
               scrollLeft = sliderTrack.scrollLeft;
          }, { passive: true });

          sliderTrack.addEventListener('touchmove', (e) => {
               if (e.cancelable) e.preventDefault();
               const x = e.touches[0].pageX - sliderTrack.offsetLeft;
               const walk = (startX - x) * 2;
               sliderTrack.scrollLeft = scrollLeft + walk;
          }, { passive: false });
     });
</script>