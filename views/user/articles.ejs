<%- include('include/head.ejs') %>
     <style>
          .grainy {
               background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%' height='100%' filter='url(%23noise)'/%3E%3C/svg%3E");
               background-repeat: repeat;
               background-size: 200px 200px;
          }
     </style>

     <body class="bg-[#F0F2F5] ">
          <%- include('include/navbar.ejs') %>

               <div class=" min-h-screen pt-16 lg:pt-20">
                    <!-- Compact Header -->
                    <div class="bg-white border-b">
                         <div class="max-w-3xl mx-auto px-4 py-6 text-center">
                              <h1 class="text-2xl sm:text-3xl font-bold text-gray-900">
                                   Nos Articles
                              </h1>
                              <p class="mt-2 text-gray-600">
                                   Conseils et guides pour le bien-Ãªtre de vos animaux
                              </p>
                         </div>
                    </div>

                    <!-- Main Content -->
                    <div class="max-w-3xl mx-auto px-4 py-6">
                         <!-- Articles List -->
                         <div class="space-y-4">
                              <% articles.forEach(article=> { %>
                                   <a href="/articles/<%= article.slug %>" class="block group">
                                        <article class="bg-white rounded-lg shadow-sm overflow-hidden
                                      transition-all duration-200 hover:shadow-md hover:translate-y-[-2px]">
                                             <div class="sm:flex">
                                                  <!-- Image Container -->
                                                  <div class="sm:w-48 sm:h-auto h-48 relative flex-shrink-0">
                                                       <img src="<%= article.featuredImage %>" alt="<%= article.title %>" class="w-full h-full object-cover">
                                                       <!-- Category Badge -->
                                                       <div class="absolute top-3 left-3">
                                                            <span class="inline-flex items-center px-3 py-1.5 rounded-full 
                                                   text-xs font-medium bg-blue-500 text-white">
                                                                 <%= article.category %>
                                                            </span>
                                                       </div>
                                                  </div>

                                                  <!-- Content Container -->
                                                  <div class="p-4 sm:p-5 flex flex-col flex-1">
                                                       <!-- Date -->
                                                       <div class="text-sm text-gray-500 mb-2">
                                                            <%= new Date(article.publicationDate).toLocaleDateString('fr-FR', { year: 'numeric' , month: 'long' , day: 'numeric' }) %>
                                                       </div>

                                                       <!-- Title -->
                                                       <h2 class="text-lg font-bold text-gray-900 mb-2 group-hover:text-blue-600
                                               transition-colors duration-200">
                                                            <%= article.title %>
                                                       </h2>

                                                       <!-- Summary -->
                                                       <p class="text-sm text-gray-600 line-clamp-2 mb-4 flex-1">
                                                            <%= article.summary %>
                                                       </p>

                                                       <!-- Footer -->
                                                       <div class="flex items-center justify-between mt-auto pt-3 border-t border-gray-100">
                                                            <!-- Author -->
                                                            <div class="flex items-center gap-2">
                                                                 <div class="w-7 h-7 rounded-full bg-gray-100 flex items-center justify-center">
                                                                      <i class="fas fa-user text-gray-500 text-xs"></i>
                                                                 </div>
                                                                 <span class="text-sm text-gray-600">
                                                                      <%= article.author %>
                                                                 </span>
                                                            </div>

                                                            <!-- Tags -->
                                                            <% if (article.tags && article.tags.length> 0) { %>
                                                                 <div class="flex gap-2">
                                                                      <% article.tags.slice(0, 2).filter(tag=> tag !== '').forEach(tag => { %>
                                                                           <span class="text-xs text-gray-500">
                                                                                #<%= tag %>
                                                                           </span>
                                                                           <% }) %>
                                                                                <% if (article.tags.length> 2) { %>
                                                                                     <span class="text-xs text-gray-400">
                                                                                          +<%= article.tags.length - 2 %>
                                                                                     </span>
                                                                                     <% } %>
                                                                 </div>
                                                                 <% } %>
                                                       </div>
                                                  </div>
                                             </div>
                                        </article>
                                   </a>
                                   <% }) %>
                         </div>

                         <!-- Load More / Pagination -->
                         <div class="mt-8 text-center">
                              <button class="inline-flex items-center gap-2 px-6 py-2.5 bg-blue-500 hover:bg-blue-600 
                              text-white text-sm font-medium rounded-lg transition-colors">
                                   Voir plus d'articles
                                   <i class="fas fa-arrow-down text-xs"></i>
                              </button>
                         </div>
                    </div>
               </div>

               <!-- Optional: Quick scroll to top button -->
               <button onclick="window.scrollTo({top: 0, behavior: 'smooth'})" class="fixed bottom-6 right-6 p-3 bg-white shadow-lg rounded-full 
                   hover:shadow-xl transition-shadow duration-200
                   opacity-0 invisible transform translate-y-4
                   scrolled:opacity-100 scrolled:visible scrolled:translate-y-0">
                    <i class="fas fa-arrow-up text-gray-600"></i>
               </button>
     </body>

     <script>
          // Scroll to top button visibility
          window.addEventListener('scroll', () => {
               const scrollButton = document.querySelector('button[onclick="window.scrollTo"]');
               if (scrollButton) {
                    scrollButton.classList.toggle('scrolled', window.scrollY > 500);
               }
          });
     </script>

     <style>
          /* Transitions */
          .scrolled\:opacity-100.scrolled {
               opacity: 1;
          }

          .scrolled\:visible.scrolled {
               visibility: visible;
          }

          .scrolled\:translate-y-0.scrolled {
               transform: translateY(0);
          }

          /* Line clamp */
          .line-clamp-2 {
               display: -webkit-box;
               -webkit-line-clamp: 2;
               -webkit-box-orient: vertical;
               overflow: hidden;
          }

          /* Smooth transitions */
          .transition-all {
               transition-property: all;
               transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
               transition-duration: 200ms;
          }
     </style>

     </html>