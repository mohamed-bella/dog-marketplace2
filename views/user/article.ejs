<!DOCTYPE html>
<html lang="fr">

<head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title>
          <%= article.title %> - Meilleurs Conseils en Dressage de Chiens
     </title>

     <!-- Meta Tags for SEO -->
     <meta name="description" content="Découvrez les meilleurs conseils de dressage de chiens avec des astuces expertes de <%= article.author %>.">
     <meta name="keywords" content="dressage de chiens, comportement canin, obéissance">
     <meta name="author" content="<%= article.author %>">

     <!-- Open Graph Meta Tags -->
     <meta property="og:title" content="<%= article.title %>">
     <meta property="og:description" content="Découvrez des conseils essentiels en dressage de chiens de <%= article.author %>.">
     <meta property="og:image" content="<%= article.featuredImage %>">
     <meta property="og:url" content="<%= pageUrl %>">

     <!-- Twitter Card -->
     <meta name="twitter:card" content="summary_large_image">

     <!-- Canonical URL -->
     <link rel="canonical" href="<%= pageUrl %>">

     <!-- Schema.org Article Markup -->
     <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Article",
            "headline": "<%= article.title %>",
            "author": {
                "@type": "Person",
                "name": "<%= article.author %>"
            },
            "datePublished": "<%= article.createdAt.toISOString() %>",
            "image": "<%= article.featuredImage %>",
            "publisher": {
                "@type": "Organization",
                "name": "Ndressilik",
                "logo": {
                    "@type": "ImageObject",
                    "url": "https://yourlogo.com/logo.png"
                }
            },
            "description": "Conseils de dressage de chiens par <%= article.author %>."
        }
    </script>

     <!-- Bootstrap CSS -->
     <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">

     <!-- Custom Styles -->
     <style>
          body {
               background-color: #f8f9fa;
               color: #212529;
               font-family: 'Inter', sans-serif;
          }

          .jumbotron {
               background-color: #f8fdc8;
               /* Couleur de fond claire */
               border-radius: 10px;
               padding: 2rem;
               /* box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1); */
          }

          .jumbotron h1 {
               font-size: 3rem;
               font-weight: bold;
          }

          .jumbotron p {
               font-size: 1.25rem;
          }

          .jumbotron .btn-lg {
               padding: 0.75rem 1.5rem;
               font-size: 1.2rem;
          }

          /* Blog card styles */
          .blog-card {
               background: white;
               border-radius: 10px;
               box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
               overflow: hidden;
               transition: transform 0.3s ease;
          }

          .blog-card:hover {
               transform: translateY(-5px);
          }

          .blog-card .photo {
               height: 200px;
               background-size: cover;
               background-position: center;
          }

          .blog-card .description {
               padding: 15px;
          }

          .blog-card .read-more a {
               text-decoration: none;
               color: #007bff;
          }

          .blog-card .read-more a:hover {
               text-decoration: underline;
               color: #0056b3;
          }

          .container {
               /* padding: 40px 0; */
          }

          .suggested-articles .card {
               margin-bottom: 20px;
          }

          .article-content {
               font-size: 18px;
               line-height: 1.8;
               background-color: white;
               border-radius: 10px;
               padding: 10px;
               border: 1px solid grey;
          }

          .article-meta {
               font-size: 14px;
               color: #6c757d;
               margin-bottom: 20px;
          }

          .tags .badge {
               background-color: #6c757d;
               margin-right: 10px;
          }

          .social-share a {
               color: #6c757d;
               margin-right: 15px;
               font-size: 1.2rem;
          }

          .social-share a:hover {
               color: #495057;
          }

          /* Adjust responsive layout */
          @media (max-width: 768px) {
               .hero-content h1 {
                    font-size: 2rem;
               }

               .hero-content p {
                    font-size: 1rem;
               }
          }
     </style>
</head>

<body>
     <%- include('include/navbar.ejs') %>
          <div class="container-fluid bg-light py-5 mb-4">
               <div class="container">
                    <div class="jumbotron py-5">
                         <h1 class="display-4">
                              <%= article.title %>
                         </h1>
                         <p class="lead">
                              Publié par <%= article.author %> le <%= article.createdAt.toDateString() %>
                         </p>
                    </div>
               </div>
          </div>
          <div class="container">
               <div class="row">
                    <!-- Main Article Content -->
                    <div class="col-lg-8">
                         <!-- Article Info -->
                         <p class="article-meta">
                              Publié le <%= article.createdAt.toDateString() %> · <%= readTime %> min de lecture
                         </p>

                         <!-- Article Image (Check if article has a featured image) -->
                         <% if (article.featuredImage) { %>
                              <div class="article-image mb-4">
                                   <img src="<%= article.featuredImage %>" alt="<%= article.title %>" class="img-fluid">
                              </div>
                              <% } %>

                                   <!-- Article Content -->
                                   <div class="article-content">
                                        <%- article.content %>
                                   </div>

                                   <!-- Tags Section -->
                                   <div class="tags my-4">
                                        <% article.tags.forEach(tag=> { %>
                                             <span class="badge rounded-pill">
                                                  <%= tag %>
                                             </span>
                                             <% }) %>
                                   </div>

                                   <!-- Social Share Buttons -->
                                   <div class="social-share my-4">
                                        <a href="https://twitter.com/share?url=<%= pageUrl %>&text=<%= article.title %>" target="_blank" title="Partager sur Twitter">
                                             <i class="fab fa-twitter"></i>
                                        </a>
                                        <a href="https://www.facebook.com/sharer.php?u=<%= pageUrl %>" target="_blank" title="Partager sur Facebook">
                                             <i class="fab fa-facebook"></i>
                                        </a>
                                        <a href="https://www.linkedin.com/sharing/share-offsite/?url=<%= pageUrl %>" target="_blank" title="Partager sur LinkedIn">
                                             <i class="fab fa-linkedin"></i>
                                        </a>
                                        <a href="#" onclick="copyLink('<%= pageUrl %>')" title="Copier le lien">
                                             <i class="fas fa-link"></i>
                                        </a>
                                   </div>

                                   <!-- Comments Section -->
                                   <hr>
                                   <section id="comments">
                                        <h2>Réponses</h2>
                                        <% if (comments.length===0) { %>
                                             <p>Aucune réponse pour le moment. Soyez le premier à répondre !</p>
                                             <% } else { %>
                                                  <% comments.forEach(comment=> { %>
                                                       <div class="comment mb-4">
                                                            <strong>
                                                                 <%= comment.name %>
                                                            </strong> · <%= comment.createdAt.toDateString() %>
                                                                 <p>
                                                                      <%= comment.comment %>
                                                                 </p>
                                                       </div>
                                                       <% }) %>
                                                            <% } %>
                                                                 <hr>

                                                                 <h3>Écrire une réponse</h3>
                                                                 <% if (error && error.length> 0) { %>
                                                                      <div class="alert alert-danger">
                                                                           <%= error %>
                                                                      </div>
                                                                      <% } %>

                                                                           <% if (success && success.length> 0) { %>
                                                                                <div class="alert alert-success">
                                                                                     <%= success %>
                                                                                </div>
                                                                                <% } %>

                                                                                     <form action="/articles/<%= article.slug %>/comments" method="POST" class="mb-5">
                                                                                          <div class="mb-3">
                                                                                               <label for="name" class="form-label">Nom</label>
                                                                                               <input type="text" id="name" name="name" class="form-control" required>
                                                                                          </div>
                                                                                          <div class="mb-3">
                                                                                               <label for="email" class="form-label">Email</label>
                                                                                               <input type="email" id="email" name="email" class="form-control" required>
                                                                                          </div>
                                                                                          <div class="mb-3">
                                                                                               <label for="comment" class="form-label">Réponse</label>
                                                                                               <textarea id="comment" name="comment" rows="4" class="form-control" required></textarea>
                                                                                          </div>
                                                                                          <button type="submit" class="btn btn-primary">Publier</button>
                                                                                     </form>
                                   </section>
                    </div>


                    <!-- Suggested Articles Section -->
                    <div class="col-lg-4">
                         <h3>Articles suggérés</h3>
                         <div class="suggested-articles">
                              <% suggestedArticles.forEach(suggestion=> { %>
                                   <div class="card">
                                        <img src="<%= suggestion.featuredImage %>" class="card-img-top" alt="<%= suggestion.title %>">
                                        <div class="card-body">
                                             <h5 class="card-title">
                                                  <%= suggestion.title %>
                                             </h5>
                                             <p class="card-text">
                                                  <%= suggestion.summary %>
                                             </p>
                                             <a href="/articles/<%= suggestion.slug %>" class="btn btn-sm btn-outline-primary">Lire l'article</a>
                                        </div>
                                   </div>
                                   <% }) %>
                         </div>
                    </div>
               </div>
          </div>

          <!-- Bootstrap JS -->
          <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>

          <!-- JavaScript for Copy Link -->
          <script>
               function copyLink(url) {
                    navigator.clipboard.writeText(url);
                    alert('Lien copié dans le presse-papiers');
               }
          </script>
</body>

</html>