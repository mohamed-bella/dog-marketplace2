<%- include('include/head.ejs') %>
<%- include('include/navbar.ejs') %>

<!-- Hero Section - Simplified with clear CTA -->
<section class="relative py-12 lg:py-20 bg-gradient-to-br from-blue-900 to-gray-900">
    <div class="max-w-6xl mx-auto px-4">
        <div class="flex flex-col lg:flex-row items-center gap-12">
            <!-- Left: Main Content -->
            <div class="flex-1 text-center lg:text-left">
                <h1 class="text-3xl md:text-4xl lg:text-5xl font-bold text-white mb-6">
                    Trouvez les Meilleurs Services pour Votre Chien au Maroc
                </h1>
                <p class="text-xl text-gray-300 mb-8">
                    √âducation, promenade, toilettage, soins v√©t√©rinaires - tous les services dont votre chien a besoin, en quelques clics.
                </p>
                <!-- Primary CTAs -->
                <div class="flex flex-col sm:flex-row gap-4 justify-center lg:justify-start">
                    <a href="/services" 
                        class="inline-flex items-center justify-center px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors">
                        <i class="fas fa-search mr-2"></i>
                        Trouver un Service
                    </a>
                   <% if (!user) { %>
                    <a href="/auth/google" 
                    class="inline-flex items-center justify-center px-6 py-3 bg-white text-blue-900 rounded-lg font-medium hover:bg-gray-100 transition-colors">
                    <i class="fas fa-user-tie mr-2"></i>
                    Devenir Prestataire
                </a>
                    <% } else { %>
                        <a href="/dashboard" 
                        class="inline-flex items-center justify-center px-6 py-3 bg-white text-blue-900 rounded-lg font-medium hover:bg-gray-100 transition-colors">
                        <i class="fas fa-user-tie mr-2"></i>
                        Gerer Mes Services
                    </a>
                        <% } %>
                </div>
            </div>
           <!-- Right: Feature Highlights -->
<div class="flex-1">
    <div class="relative bg-white/5 backdrop-blur-sm rounded-xl p-6">
        <!-- Decorative background pattern -->
        <div class="absolute inset-0 opacity-5">
            <svg width="100%" height="100%" class="rotate-180">
                <pattern id="hero-pattern" x="0" y="0" width="32" height="32" patternUnits="userSpaceOnUse">
                    <path d="M0 32V.5H32" fill="none" stroke="currentColor" stroke-width="1"></path>
                </pattern>
                <rect width="100%" height="100%" fill="url(#hero-pattern)"></rect>
            </svg>
        </div>
        
        <!-- Feature list -->
        <ul class="relative space-y-4">
            <li class="flex items-center gap-3 text-white/90">
                <div class="flex-shrink-0 w-8 h-8 flex items-center justify-center">
                    <i class="fas fa-certificate text-blue-400"></i>
                </div>
                <span class="text-sm">Services professionnels v√©rifi√©s et certifi√©s</span>
            </li>
            
            <li class="flex items-center gap-3 text-white/90">
                <div class="flex-shrink-0 w-8 h-8 flex items-center justify-center">
                    <i class="fas fa-clock text-blue-400"></i>
                </div>
                <span class="text-sm">R√©servation en ligne simple et rapide</span>
            </li>
            
            <li class="flex items-center gap-3 text-white/90">
                <div class="flex-shrink-0 w-8 h-8 flex items-center justify-center">
                    <i class="fas fa-shield-alt text-blue-400"></i>
                </div>
                <span class="text-sm">Paiements s√©curis√©s et garantie satisfaction</span>
            </li>
            
            <li class="flex items-center gap-3 text-white/90">
                <div class="flex-shrink-0 w-8 h-8 flex items-center justify-center">
                    <i class="fas fa-thumbs-up text-blue-400"></i>
                </div>
                <span class="text-sm">Avis clients v√©rifi√©s et authentiques</span>
            </li>
        </ul>
    </div>
</div>
        </div>
    </div>
</section>
<!-- Services Section - Simplified Grid -->
<section class="py-12 bg-gray-50">
    <div class="max-w-6xl mx-auto px-4">
        <h2 class="text-2xl md:text-3xl font-bold text-center text-gray-900 mb-12">
            Services Disponibles
        </h2>
        <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
            <!-- Education -->
            <a href="/services/education" class="group">
                <div class="bg-white p-6 rounded-lg shadow-sm hover:shadow-md transition-shadow text-center">
                    <div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-graduation-cap text-blue-600"></i>
                    </div>
                    <h3 class="font-medium text-gray-900">Dressage</h3>
                </div>
            </a>
            <!-- Promenade -->
            <a href="/services/promenade" class="group">
                <div class="bg-white p-6 rounded-lg shadow-sm hover:shadow-md transition-shadow text-center">
                    <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-walking text-green-600"></i>
                    </div>
                    <h3 class="font-medium text-gray-900">Promenade</h3>
                </div>
            </a>
            <!-- Toilettage -->
            <a href="/services/toilettage" class="group">
                <div class="bg-white p-6 rounded-lg shadow-sm hover:shadow-md transition-shadow text-center">
                    <div class="w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-cut text-purple-600"></i>
                    </div>
                    <h3 class="font-medium text-gray-900">Toilettage</h3>
                </div>
            </a>
            <!-- Veterinaire -->
            <a href="/services/veterinaire" class="group">
                <div class="bg-white p-6 rounded-lg shadow-sm hover:shadow-md transition-shadow text-center">
                    <div class="w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-stethoscope text-red-600"></i>
                    </div>
                    <h3 class="font-medium text-gray-900">V√©t√©rinaire</h3>
                </div>
            </a>
             <!-- Pension -->
             <a href="/services/pension" class="group">
                <div class="bg-white p-6 rounded-lg shadow-sm hover:shadow-md transition-shadow text-center">
                    <div class="w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-house text-red-600"></i>
                    </div>
                    <h3 class="font-medium text-gray-900">Pension</h3>
                </div>
            </a>
            <!-- Transport -->
            <a href="/services/transport" class="group">
                <div class="bg-white p-6 rounded-lg shadow-sm hover:shadow-md transition-shadow text-center">
                    <div class="w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-car text-yellow-600"></i>
                    </div>
                    <h3 class="font-medium text-gray-900">Transport</h3>
                </div>
            </a>
        </div>
    </div>
</section>
<!-- First, add the html2canvas library -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

<!-- Top Providers Section with Achievement System -->
<section class="bg-white p-4 sm:p-6 rounded-2xl shadow-lg border border-gray-100">
    <!-- Gamified Header -->
    <div class="flex items-center justify-between mb-6">
        <div>
            <div class="flex items-center gap-2">
                <h3 class="text-lg sm:text-xl font-bold text-gray-900"> Top Prestataires</h3>
                <span class="px-2 py-1 bg-amber-100 text-amber-700 text-xs rounded-full font-medium">
                    Saison 1
                </span>
            </div>
            <p class="text-xs sm:text-sm text-gray-500 mt-1"> Top Prestataires des Services Canine </p>
        </div>
        <a href="/top-users" 
           class="hidden sm:flex items-center gap-2 px-4 py-2 bg-black text-white rounded-full hover:bg-black/90 transition-all text-sm font-semibold group">
            Classement complet
            <span class="group-hover:translate-x-0.5 transition-transform">‚Üí</span>
        </a>
    </div>

    <!-- Rank Categories Banner (Desktop) -->
    <div class="hidden sm:flex items-center justify-center gap-8 mb-8 text-center">
        <div class="flex flex-col items-center">
            <span class="text-xs text-gray-500 mb-1">Top Elite</span>
            <div class="w-8 h-8 bg-amber-400 rounded-full flex items-center justify-center shadow-amber-100 shadow-lg">
                üèÜ
            </div>
        </div>
        <div class="flex flex-col items-center">
            <span class="text-xs text-gray-500 mb-1">Expert</span>
            <div class="w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center shadow-gray-100 shadow-lg">
                üíé
            </div>
        </div>
        <div class="flex flex-col items-center">
            <span class="text-xs text-gray-500 mb-1">Pro</span>
            <div class="w-8 h-8 bg-amber-600 rounded-full flex items-center justify-center shadow-amber-50 shadow-lg">
                ‚≠ê
            </div>
        </div>
    </div>

    <!-- Desktop Grid -->
    <div class="hidden sm:grid sm:grid-cols-3 gap-6">
        <% topUsers.slice(0, 3).forEach((user, index) => { %>
            <div id="provider-card-desktop-<%= user._id %>" 
                class="relative group transform hover:scale-[1.02] transition-all duration-300"
            >
                <!-- Achievement Banner -->
                <div class="absolute -top-2 left-1/2 -translate-x-1/2 px-3 py-1 text-xs font-semibold rounded-full z-20
                    <%= index === 0 ? 'bg-amber-400 text-amber-900' : 
                       index === 1 ? 'bg-gray-200 text-gray-700' : 
                       'bg-amber-600 text-white' %>">
                    <%= index === 0 ? 'Top Elite' : index === 1 ? 'Expert' : 'Pro' %>
                </div>

                <!-- Card -->
                <div class="relative bg-white rounded-2xl p-6 pt-8 border-2 transition-all
                    <%= index === 0 ? 'border-amber-400 shadow-amber-100' : 
                       index === 1 ? 'border-gray-200 shadow-gray-100' : 
                       'border-amber-600 shadow-amber-50' %> shadow-lg">
                    
                    <!-- Position & Level Banner -->
                    <div class="absolute top-3 right-3 flex items-center gap-2">
                        <div class="px-2 py-1 bg-gray-100 rounded-full text-xs font-medium text-gray-600">
                            Niveau <%= Math.floor(user.totalScore / 50) + 1 %>
                        </div>
                        <div class="w-6 h-6 rounded-full bg-black text-white flex items-center justify-center text-xs font-bold">
                            <%= index + 1 %>
                        </div>
                    </div>

                    <!-- User Info -->
                    <div class="flex items-center gap-4">
                        <div class="relative">
                            <div class="w-16 h-16 rounded-full overflow-hidden ring-2
                                <%= index === 0 ? 'ring-amber-400' : 
                                   index === 1 ? 'ring-gray-200' : 
                                   'ring-amber-600' %>">
                                <img src="<%= user.profileImage %>" 
                                     alt="<%= user.displayName %>"
                                     class="w-full h-full object-cover"
                                />
                            </div>
                            <div class="absolute -bottom-1 -right-1 w-6 h-6 bg-white rounded-full shadow-md flex items-center justify-center">
                                <%= user.totalScore >= 100 ? 'üëë' : user.totalScore >= 50 ? 'üåü' : '‚ú®' %>
                            </div>
                        </div>
                        <div>
                            <h4 class="font-semibold text-gray-900"><%= user.displayName %></h4>
                            <!-- Achievement Tags -->
                            <div class="flex flex-wrap gap-1 mt-1">
                                <% if (user.totalViews >= 50) { %>
                                    <span class="px-2 py-0.5 bg-blue-50 text-blue-600 rounded text-xs">Populaire</span>
                                <% } %>
                                <% if (user.totalReviews >= 5) { %>
                                    <span class="px-2 py-0.5 bg-green-50 text-green-600 rounded text-xs">Top Rated</span>
                                <% } %>
                            </div>
                        </div>
                    </div>

                    <!-- Stats & Progress -->
                    <div class="mt-6 space-y-4">
                        <!-- Progress to Next Level -->
                        <div>
                            <div class="flex justify-between text-sm mb-1">
                                <span class="text-gray-600">Progression niveau <%= Math.floor(user.totalScore / 50) + 2 %></span>
                                <span class="font-medium"><%= user.totalScore %> / <%= (Math.floor(user.totalScore / 50) + 1) * 50 %></span>
                            </div>
                            <div class="h-2 bg-gray-100 rounded-full overflow-hidden">
                                <div class="h-full rounded-full transition-all duration-500
                                    <%= index === 0 ? 'bg-amber-400' : 
                                       index === 1 ? 'bg-gray-400' : 
                                       'bg-amber-600' %>"
                                    style="width: <%= Math.min((user.totalScore % 50) / 50 * 100, 100) %>%">
                                </div>
                            </div>
                        </div>

                        <!-- Achievements Grid -->
                        <div class="grid grid-cols-3 gap-2">
                            <div class="text-center p-2 rounded-lg bg-gray-50">
                                <div class="text-lg font-bold text-gray-900"><%= user.totalViews %></div>
                                <div class="text-xs text-gray-500">Vues</div>
                            </div>
                            <div class="text-center p-2 rounded-lg bg-gray-50">
                                <div class="text-lg font-bold text-gray-900"><%= user.totalReviews %></div>
                                <div class="text-xs text-gray-500">Avis</div>
                            </div>
                            <div class="text-center p-2 rounded-lg bg-gray-50">
                                <div class="text-lg font-bold text-gray-900"><%= user.totalScore %></div>
                                <div class="text-xs text-gray-500">Score</div>
                            </div>
                        </div>
                    </div>

                    <!-- Share Button -->
                    <button onclick="shareProviderCard('desktop-<%= user._id %>')"
                        class="w-full mt-6 flex items-center justify-center gap-2 px-4 py-3 bg-gray-900 text-white rounded-xl hover:bg-black transition-all text-sm font-medium">
                        Partager ma carte
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"/>
                        </svg>
                    </button>
                </div>
            </div>
        <% }) %>
    </div>

    <!-- Mobile Optimized List -->
    <div class="sm:hidden space-y-4">
        <% topUsers.slice(0, 3).forEach((user, index) => { %>
            <div id="provider-card-mobile-<%= user._id %>" class="relative">
                <div class="bg-white rounded-xl border border-gray-100 overflow-hidden">
                    <!-- Achievement Banner -->
                    <div class="bg-gray-50 px-3 py-2 border-b border-gray-100 flex items-center justify-between">
                        <div class="flex items-center gap-2">
                            <div class="w-5 h-5 rounded-full flex items-center justify-center text-xs font-bold
                                <%= index === 0 ? 'bg-amber-400 text-amber-900' : 
                                   index === 1 ? 'bg-gray-200 text-gray-700' : 
                                   'bg-amber-600 text-white' %>">
                                <%= index + 1 %>
                            </div>
                            <span class="text-xs font-medium text-gray-600">
                                <%= index === 0 ? 'Top Elite' : index === 1 ? 'Expert' : 'Pro' %>
                            </span>
                        </div>
                        <div class="px-2 py-0.5 bg-gray-100 rounded-full text-xs font-medium text-gray-600">
                            Niveau <%= Math.floor(user.totalScore / 50) + 1 %>
                        </div>
                    </div>

                    <div class="p-3">
                        <!-- User Info -->
                        <div class="flex items-center gap-3">
                            <div class="relative" onclick="window.location.href = '/@<%= user.slug%>'">
                                <img src="<%= user.profileImage %>" 
                                     alt="<%= user.displayName %>"
                                     class="w-12 h-12 rounded-full object-cover ring-2
                                        <%= index === 0 ? 'ring-amber-400' : 
                                           index === 1 ? 'ring-gray-200' : 
                                           'ring-amber-600' %>"
                                />
                                <div class="absolute -bottom-1 -right-1 w-5 h-5 bg-white rounded-full shadow flex items-center justify-center text-xs">
                                    <%= user.totalScore >= 100 ? 'üëë' : user.totalScore >= 50 ? 'üåü' : '‚ú®' %>
                                </div>
                            </div>
                            
                            <div class="flex-1 min-w-0">
                                <h4 class="font-medium text-gray-900 truncate"><%= user.displayName %></h4>
                                <div class="flex items-center gap-3 mt-1 text-xs text-gray-500">
                                    <span class="flex items-center gap-1">
                                        <i class="fas fa-eye"></i>
                                        <%= user.totalViews %>
                                    </span>
                                    <span class="flex items-center gap-1">
                                        <i class="fas fa-star"></i>
                                        <%= user.totalReviews %>
                                    </span>
                                    <span class="flex items-center gap-1">
                                        <i class="fas fa-trophy"></i>
                                        <%= user.totalScore %>
                                    </span>
                                </div>
                            </div>
                        </div>

                        <!-- Progress Bar -->
                        <div class="mt-3">
                            <div class="h-1.5 bg-gray-100 rounded-full overflow-hidden">
                                <div class="h-full rounded-full transition-all duration-500
                                    <%= index === 0 ? 'bg-amber-400' : 
                                       index === 1 ? 'bg-gray-400' : 
                                       'bg-amber-600' %>"
                                    style="width: <%= Math.min((user.totalScore % 50) / 50 * 100, 100) %>%">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Action Footer -->
                    <div class="grid grid-cols-2 divide-x border-t border-gray-100">
                        <a href="/@<%= user.slug %>" 
                           class="py-2 text-center text-xs font-medium text-gray-600 hover:bg-gray-50">
                            Voir profil
                        </a>
                        <button onclick="shareProviderCard('mobile-<%= user._id %>')"
                            class="py-2 flex items-center justify-center gap-1 text-xs font-medium text-gray-600 hover:bg-gray-50">
                            <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"/>
                            </svg>
                            Partager


                        </button>
                    </div>
                </div>
            </div>
        <% }) %>
    </div>

    <!-- Mobile Call-to-Action -->
    <div class="mt-6 sm:hidden space-y-3">
        <a href="/top-users" 
           class="block w-full py-3 bg-black text-white text-center rounded-xl hover:bg-black/90 transition-all text-sm font-medium">
            Voir le classement complet
        </a>
        <p class="text-xs text-center text-gray-500">
            Gagnez des points pour monter dans le classement üèÜ
        </p>
    </div>
</section>

<script>
// Gamification animations and effects
document.querySelectorAll('.achievement-unlock').forEach(achievement => {
    achievement.addEventListener('mouseover', () => {
        achievement.classList.add('scale-110', 'rotate-3');
    });
    achievement.addEventListener('mouseout', () => {
        achievement.classList.remove('scale-110', 'rotate-3');
    });
});

async function shareProviderCard(cardId) {
    try {
        const shareBtn = document.querySelector(`#provider-card-${cardId} button`);
        const originalText = shareBtn.innerHTML;
        
        // Animated loading state
        shareBtn.innerHTML = `
            <div class="flex items-center gap-2">
                <svg class="animate-spin h-4 w-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                </svg>
                <span>G√©n√©ration...</span>
            </div>
        `;
        shareBtn.disabled = true;

        const card = document.getElementById(`provider-card-${cardId}`);
        
        // Add temporary celebration effects before capture
        const confetti = document.createElement('div');
        confetti.className = 'absolute inset-0 pointer-events-none z-50';
        confetti.innerHTML = `
            <div class="absolute top-0 left-0 w-full h-full overflow-hidden">
                ${Array(20).fill().map(() => `
                    <div class="absolute w-2 h-2 rounded-full bg-amber-400 opacity-0 animate-confetti"
                         style="left: ${Math.random() * 100}%; animation-delay: ${Math.random() * 1}s">
                    </div>
                `).join('')}
            </div>
        `;
        card.appendChild(confetti);

        // Wait for animations
        await new Promise(resolve => setTimeout(resolve, 100));

        const canvas = await html2canvas(card, {
            backgroundColor: '#FFFFFF',
            scale: 2,
            logging: false,
            useCORS: true,
            allowTaint: true,
            onclone: (clonedDoc) => {
                const clonedCard = clonedDoc.getElementById(`provider-card-${cardId}`);
                if (clonedCard) {
                    clonedCard.style.transform = 'none';
                    clonedCard.style.transition = 'none';
                }
            }
        });

        // Remove celebration effects
        card.removeChild(confetti);

        canvas.toBlob(async (blob) => {
            if (navigator.share) {
                try {
                    const file = new File([blob], 'ndressilik-achievement.png', { type: 'image/png' });
                    await navigator.share({
                        files: [file],
                        title: 'Mon classement Ndressilik',
                        text: 'üèÜ D√©couvrez mon rang sur Ndressilik! #NdressilikChampion'
                    });
                    showSuccessToast('Carte partag√©e !');
                } catch (err) {
                    if (err.name !== 'AbortError') {
                        downloadCard(blob);
                        showSuccessToast('Carte t√©l√©charg√©e !');
                    }
                }
            } else {
                downloadCard(blob);
                showSuccessToast('Carte t√©l√©charg√©e !');
            }
        }, 'image/png', 1.0);
    } catch (error) {
        console.error('Error:', error);
        showErrorToast('Oups! Une erreur est survenue');
    } finally {
        resetShareButton(cardId);
    }
}

function downloadCard(blob) {
    const url = window.URL.createObjectURL(blob);
    const link = document.createElement('a');
    link.href = url;
    link.download = `ndressilik-champion-${Date.now()}.png`;
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
    window.URL.revokeObjectURL(url);
}

function showSuccessToast(message) {
    showToast(message, 'success');
}

function showErrorToast(message) {
    showToast(message, 'error');
}

function showToast(message, type = 'success') {
    // Remove existing toasts
    document.querySelectorAll('.toast').forEach(t => t.remove());

    const toast = document.createElement('div');
    toast.className = `toast fixed bottom-4 right-4 px-4 py-2 rounded-lg shadow-lg transform transition-all duration-300 z-50 ${
        type === 'success' ? 'bg-black' : 'bg-red-500'
    } text-white flex items-center gap-2 opacity-0 translate-y-6`;

    const icon = type === 'success' ? 'üèÜ' : '‚ùå';
    toast.innerHTML = `
        <span class="text-base">${icon}</span>
        <span class="text-sm font-medium">${message}</span>
    `;
    
    document.body.appendChild(toast);
    requestAnimationFrame(() => {
        toast.classList.remove('opacity-0', 'translate-y-6');
    });
    
    setTimeout(() => {
        toast.classList.add('opacity-0', 'translate-y-6');
        setTimeout(() => toast.remove(), 300);
    }, 3000);
}

function resetShareButton(cardId) {
    const shareBtn = document.querySelector(`#provider-card-${cardId} button`);
    if (shareBtn) {
        shareBtn.innerHTML = `
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"/>
            </svg>
            Partager
        `;
        shareBtn.disabled = false;
    }
}
</script>

<style>
@keyframes confetti {
    0% { transform: translateY(0) rotate(0); opacity: 1; }
    100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
}

.animate-confetti {
    animation: confetti 3s ease-out forwards;
}

@keyframes shine {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
}

.achievement-shine::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 200%;
    height: 100%;
    background: linear-gradient(
        90deg,
        transparent,
        rgba(255,255,255,0.2),
        transparent
    );
    animation: shine 2s infinite;
}
</style>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>


<!-- Articles and Consultation Section -->
<section class="py-12 bg-white">
    <div class="max-w-6xl mx-auto px-4">
        <div class="grid md:grid-cols-2 gap-8">
            <!-- Articles -->
            <div class="bg-gray-50 rounded-2xl p-8">
                <div class="flex items-center justify-between mb-6">
                    <h3 class="text-2xl font-bold text-gray-900">Articles et Guides</h3>
                    <a href="/articles" class="text-blue-600 hover:text-blue-700 font-medium">
                        Voir tout <i class="fas fa-arrow-right ml-2"></i>
                    </a>
                </div>
                <div class="space-y-4">
                    <a href="/articles" class="group block p-4 bg-white rounded-xl hover:shadow-md transition-shadow">
                        <div class="flex items-start gap-4">
                            <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0">
                                <i class="fas fa-book text-blue-600"></i>
                            </div>
                            <div>
                                <h4 class="font-medium text-gray-900 group-hover:text-blue-600 transition-colors">Guide d'√âducation Canine</h4>
                                <p class="text-sm text-gray-600">Conseils et astuces pour dresser votre chien</p>
                            </div>
                        </div>
                    </a>
                    <a href="/articles" class="group block p-4 bg-white rounded-xl hover:shadow-md transition-shadow">
                        <div class="flex items-start gap-4">
                            <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center flex-shrink-0">
                                <i class="fas fa-heartbeat text-green-600"></i>
                            </div>
                            <div>
                                <h4 class="font-medium text-gray-900 group-hover:text-green-600 transition-colors">Sant√© et Bien-√™tre</h4>
                                <p class="text-sm text-gray-600">Maintenir votre chien en bonne sant√©</p>
                            </div>
                        </div>
                    </a>
                </div>
            </div>

            <!-- Consultation Services -->
            <div class="bg-gray-50 rounded-2xl p-8">
                <h3 class="text-2xl font-bold text-gray-900 mb-6">Consultation Professionnelle</h3>
                <div class="space-y-6">
                    <!-- Free Consultation -->
                    <div class="bg-white p-6 rounded-xl border border-gray-200">
                        <div class="flex items-center justify-between mb-4">
                            <h4 class="font-medium text-gray-900">Consultation Gratuite</h4>
                            <span class="px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm">Gratuit</span>
                        </div>
                        <p class="text-gray-600 mb-4">Obtenez des conseils de base pour prendre soin de votre chien</p>
                        <a href="/consultation" class="inline-block w-full text-center py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-gray-700 font-medium transition-colors">
                            Commencer
                        </a>
                    </div>

                    <!-- Premium Consultation -->
                    <div class="bg-white p-6 rounded-xl border-2 border-blue-200">
                        <div class="flex items-center justify-between mb-4">
                            <h4 class="font-medium text-gray-900">Consultation Premium</h4>
                            <span class="px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm">Premium</span>
                        </div>
                        <p class="text-gray-600 mb-4">Consultation personnalis√©e avec nos experts certifi√©s</p>
                        <a href="/consultation" class="inline-block w-full text-center py-2 bg-blue-600 hover:bg-blue-700 rounded-lg text-white font-medium transition-colors">
                            R√©server
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- AI Feature Section -->
<section class="py-12 bg-gradient-to-br from-purple-900 to-purple-800 text-white">
    <div class="max-w-6xl mx-auto px-4">
        <div class="flex flex-col lg:flex-row items-center gap-12">
            <!-- Left: AI Feature Content -->
            <div class="flex-1">
                <span class="inline-block px-3 py-1 bg-purple-500/20 text-purple-200 rounded-full text-sm mb-4">
                    <i class="fas fa-robot mr-2"></i>Intelligence Artificielle
                </span>
                <h2 class="text-3xl md:text-4xl font-bold mb-6">
                    D√©couvrez la Race de Votre Chien avec Notre IA
                </h2>
                <p class="text-lg text-purple-100 mb-8">
                    T√©l√©chargez simplement une photo et notre intelligence artificielle identifiera la race de votre chien avec pr√©cision.
                </p>
                <a href="/dog-breeds-analyzer" class="inline-flex items-center gap-2 px-6 py-3 bg-purple-500 hover:bg-purple-600 rounded-lg font-medium transition-colors">
                    <i class="fas fa-camera"></i>
                    Analyser une Photo
                </a>
            </div>
            <!-- Right: Feature Preview -->
            <div class="flex-1">
                <div class="bg-white/10 backdrop-blur-sm rounded-2xl p-6">
                    <div class="aspect-video bg-purple-900/50 rounded-lg flex items-center justify-center mb-4">
                        <i class="fas fa-dog text-6xl text-purple-300"></i>
                    </div>
                    <div class="space-y-2">
                        <div class="flex items-center justify-between py-2 px-4 bg-purple-800/50 rounded-lg">
                            <span>Golden Retriever</span>
                            <span>98%</span>
                        </div>
                        <div class="flex items-center justify-between py-2 px-4 bg-purple-800/50 rounded-lg">
                            <span>Labrador Retriever</span>
                            <span>85%</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- How It Works - Simple Steps -->
<section class="py-12 bg-white">
    <div class="max-w-6xl mx-auto px-4">
        <h2 class="text-2xl md:text-3xl font-bold text-center text-gray-900 mb-12">
            Comment √áa Marche
        </h2>
        <div class="grid md:grid-cols-3 gap-8">
            <!-- Step 1 -->
            <div class="text-center">
                <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                    <span class="text-blue-600 font-bold text-xl">1</span>
                </div>
                <h3 class="font-medium text-gray-900 mb-2">Choisissez un Service</h3>
                <p class="text-gray-600">S√©lectionnez le service dont votre chien a besoin</p>
            </div>
            <!-- Step 2 -->
            <div class="text-center">
                <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                    <span class="text-blue-600 font-bold text-xl">2</span>
                </div>
                <h3 class="font-medium text-gray-900 mb-2">Contactez le Prestataire</h3>
                <p class="text-gray-600">Discutez directement avec le professionnel</p>
            </div>
            <!-- Step 3 -->
            <div class="text-center">
                <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                    <span class="text-blue-600 font-bold text-xl">3</span>
                </div>
                <h3 class="font-medium text-gray-900 mb-2">Profitez du Service</h3>
                <p class="text-gray-600">R√©servez et profitez du service choisi</p>
            </div>
        </div>
    </div>
</section>

<!-- Trust Indicators -->
<!-- <section class="py-12 bg-gray-50">
    <div class="max-w-6xl mx-auto px-4">
        <div class="grid grid-cols-2 md:grid-cols-4 gap-6 text-center">
            <div>
                <div class="text-3xl font-bold text-blue-600 mb-2">500+</div>
                <div class="text-gray-600">Clients Satisfaits</div>
            </div>
            <div>
                <div class="text-3xl font-bold text-blue-600 mb-2">50+</div>
                <div class="text-gray-600">Professionnels</div>
            </div>
            <div>
                <div class="text-3xl font-bold text-blue-600 mb-2">10</div>
                <div class="text-gray-600">Villes</div>
            </div>
            <div>
                <div class="text-3xl font-bold text-blue-600 mb-2">4.8/5</div>
                <div class="text-gray-600">Note Moyenne</div>
            </div>
        </div>
    </div>
</section> -->

<!-- CTA Section -->
<section class="py-12 bg-blue-900 text-white">
    <div class="max-w-6xl mx-auto px-4 text-center">
        <h2 class="text-2xl md:text-3xl font-bold mb-6">
            Pr√™t √† Offrir le Meilleur √† Votre Chien ?
        </h2>
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
            <a href="/services" 
                class="inline-flex items-center justify-center px-6 py-3 bg-white text-blue-900 rounded-lg font-medium hover:bg-gray-100 transition-colors">
                Trouver un Service
            </a>
            <a href="/auth/google" 
                class="inline-flex items-center justify-center px-6 py-3 bg-blue-800 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors">
                Devenir Prestataire
            </a>
        </div>
    </div>
</section>

<!-- Mobile App Banner (Optional) -->
<!-- <section class="py-6 bg-gray-100">
    <div class="max-w-6xl mx-auto px-4">
        <div class="flex items-center justify-between">
            <div class="flex items-center gap-4">
                <i class="fas fa-mobile-alt text-2xl text-blue-600"></i>
                <p class="font-medium">T√©l√©chargez notre application mobile pour un acc√®s facile</p>
            </div>
            <div class="flex gap-4">
                <a href="#" class="text-blue-600 hover:text-blue-700">
                    <i class="fab fa-apple text-2xl"></i>
                </a>
                <a href="#" class="text-blue-600 hover:text-blue-700">
                    <i class="fab fa-android text-2xl"></i>
                </a>
            </div>
        </div>
    </div>
</section> -->

<%- include('include/footer.ejs') %>

<script>
// Simple scroll animations
const observerOptions = {
    threshold: 0.1,
    rootMargin: '20px'
};

const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
        if (entry.isIntersecting) {
            entry.target.classList.add('fade-in');
            observer.unobserve(entry.target);
        }
    });
}, observerOptions);

document.querySelectorAll('section').forEach(section => {
    observer.observe(section);
});

// Mobile menu functionality (if needed)
const mobileMenuButton = document.getElementById('mobile-menu-button');
const mobileMenu = document.getElementById('mobile-menu');

if (mobileMenuButton && mobileMenu) {
    mobileMenuButton.addEventListener('click', () => {
        mobileMenu.classList.toggle('hidden');
    });
}
</script>

<style>
@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.fade-in {
    animation: fadeIn 0.6s ease-out forwards;
}
</style>