<div class="bg-white rounded-2xl shadow-lg overflow-hidden" id="specializationsSection" dir="rtl">
     <!-- Header -->
     <div class="p-6 border-b border-gray-100 relative">
          <div class="absolute inset-x-0 bottom-0 h-1 bg-gradient-to-l from-blue-500 to-blue-600"></div>
          <div class="flex items-center justify-between">
               <div class="flex items-center gap-3">
                    <h3 class="text-xl font-bold text-gray-900 font-arabic">التخصصات</h3>
                    <span class="px-3 py-1 text-sm font-medium text-blue-600 bg-blue-50 rounded-full font-arabic">
                         <%= user.specializations?.length || 0 %> محدد
                    </span>
               </div>
          </div>
     </div>

     <!-- View Mode -->
     <div id="specializationsView" class="p-6">
          <% if (user.specializations?.length> 0) { %>
               <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    <% user.specializations.forEach(spec=> {
                         const specInfo = specializations.find(s => s.value === spec);
                         %>
                         <div class="relative group">
                              <div class="flex items-center p-4 bg-gradient-to-l from-blue-50 to-blue-100/50 
                                    rounded-xl transition-all duration-300 hover:-translate-y-1 hover:shadow-lg">
                                   <div class="flex-shrink-0 w-12 h-12 flex items-center justify-center rounded-xl 
                                      bg-blue-600 text-white transform transition-transform duration-300 
                                      group-hover:rotate-12">
                                        <i class="fas <%= specInfo?.icon %> text-xl"></i>
                                   </div>
                                   <div class="mr-4 font-arabic">
                                        <h4 class="text-sm font-semibold text-gray-900">
                                             <%= specInfo?.label || spec %>
                                        </h4>
                                        <p class="mt-1 text-xs text-gray-500">خدمة معتمدة</p>
                                   </div>
                                   <div class="absolute -top-1 -left-1 w-3 h-3 bg-green-400 rounded-full 
                                      border-2 border-white scale-0 group-hover:scale-100 transition-transform"></div>
                              </div>
                         </div>
                         <% }); %>
               </div>

               <!-- Enhanced Edit Button -->
               <div class="mt-8 text-center">
                    <button type="button" id="editSpecializationsBtn" class="group inline-flex items-center gap-2 px-6 py-3 bg-blue-50 text-blue-600 
                               rounded-xl font-arabic transition-all duration-300
                               hover:bg-blue-600 hover:text-white hover:shadow-lg 
                               hover:shadow-blue-500/10 hover:-translate-y-0.5">
                         <i class="fas fa-edit transform transition-transform duration-300 
                             group-hover:rotate-12 group-hover:scale-110"></i>
                         <span>تعديل التخصصات</span>
                    </button>
               </div>
               <% } else { %>
                    <!-- Empty State -->
                    <div class="text-center py-12">
                         <div class="inline-flex items-center justify-center w-20 h-20 rounded-full bg-blue-50 mb-4
                            animate-bounce">
                              <i class="fas fa-puzzle-piece text-3xl text-blue-500"></i>
                         </div>
                         <h3 class="text-lg font-semibold text-gray-900 mb-2 font-arabic">لا توجد تخصصات محددة</h3>
                         <p class="text-gray-500 mb-6 font-arabic">أضف تخصصاتك لمساعدة العملاء في العثور عليك</p>
                         <button type="button" id="editSpecializationsBtn" class="group inline-flex items-center gap-2 px-6 py-3 bg-blue-600 text-white 
                               rounded-xl font-arabic transition-all duration-300
                               hover:bg-blue-700 hover:shadow-lg hover:shadow-blue-500/20 
                               hover:-translate-y-0.5">
                              <i class="fas fa-plus transform transition-transform duration-300 
                             group-hover:rotate-90"></i>
                              <span>إضافة تخصصات</span>
                         </button>
                    </div>
                    <% } %>
     </div>

     <!-- Edit Mode -->
     <form id="specializationsForm" class="hidden">
          <div class="p-6 space-y-6">
               <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    <% specializations.forEach(spec=> { %>
                         <label class="relative group flex flex-col p-4 cursor-pointer rounded-xl border-2 
                                 transition-all duration-300 hover:-translate-y-1
                                 <%= user.specializations?.includes(spec.value) ? 
                                    'border-blue-500 bg-blue-50/50' : 
                                    'border-gray-200 hover:border-blue-200 hover:shadow-lg' %>">
                              <div class="flex items-center">
                                   <input type="checkbox" name="specializations[]" value="<%= spec.value %>" class="hidden peer" <%=user.specializations?.includes(spec.value) ? 'checked' : '' %>>
                                   <div class="w-6 h-6 rounded-lg border-2 border-gray-300 flex items-center justify-center
                                      peer-checked:border-blue-500 peer-checked:bg-blue-500 transition-all duration-300">
                                        <i class="fas fa-check text-white scale-0 peer-checked:scale-100 transition-transform"></i>
                                   </div>
                                   <div class="mr-4 flex-1 font-arabic">
                                        <span class="block text-sm font-semibold text-gray-900">
                                             <%= spec.label %>
                                        </span>
                                        <span class="block text-xs text-gray-500 mt-1">
                                             <i class="fas <%= spec.icon %> ml-1"></i>
                                             خدمة احترافية
                                        </span>
                                   </div>
                              </div>
                              <div class="mt-4 text-sm text-gray-500 leading-relaxed font-arabic">
                                   وصف تفصيلي لخدمة <%= spec.label %>...
                              </div>
                         </label>
                         <% }); %>
               </div>

               <!-- Action Buttons -->
               <div class="flex gap-4 pt-6 border-t border-gray-100">
                    <button type="button" id="cancelSpecializationsBtn" class="flex-1 h-12 bg-gray-50 text-gray-700 rounded-xl font-arabic
                               hover:bg-gray-100 focus:ring-4 focus:ring-gray-200
                               transition-all duration-300 group">
                         <i class="fas fa-times ml-2 group-hover:rotate-90 transition-transform"></i>
                         إلغاء
                    </button>
                    <button type="submit" class="flex-1 h-12 bg-blue-600 text-white rounded-xl font-arabic
                               hover:bg-blue-700 focus:ring-4 focus:ring-blue-500/30
                               transition-all duration-300 group">
                         <i class="fas fa-check ml-2 group-hover:scale-110 transition-transform"></i>
                         حفظ
                    </button>
               </div>
          </div>
     </form>
</div>

<style>
     /* Enhanced Animations */
     @keyframes slideIn {
          from {
               opacity: 0;
               transform: translateY(-20px);
          }

          to {
               opacity: 1;
               transform: translateY(0);
          }
     }

     @keyframes scaleIn {
          from {
               opacity: 0;
               transform: scale(0.95);
          }

          to {
               opacity: 1;
               transform: scale(1);
          }
     }

     .animate-slide-in {
          animation: slideIn 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards;
     }

     .animate-scale-in {
          animation: scaleIn 0.3s ease-out forwards;
     }

     /* Card Hover Effects */
     .spec-card {
          transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
     }

     .spec-card:hover {
          transform: translateY(-2px);
     }

     /* Checkbox Animation */
     .checkbox-animate {
          transition: all 0.2s cubic-bezier(0.16, 1, 0.3, 1);
     }

     /* Keep your existing JavaScript but update the animation classes */
</style>

<script>
     // Keep your existing JavaScript but add these enhancements:

     document.addEventListener('DOMContentLoaded', function () {
          // Add hover effect sounds (optional)
          const cards = document.querySelectorAll('.spec-card');
          cards.forEach(card => {
               card.addEventListener('mouseover', () => {
                    // You can add a subtle hover sound here if desired
               });
          });

          // Add checkbox animation
          const checkboxes = document.querySelectorAll('input[type="checkbox"]');
          checkboxes.forEach(checkbox => {
               checkbox.addEventListener('change', function () {
                    const label = this.closest('label');
                    if (this.checked) {
                         label.classList.add('animate-scale-in');
                    }
               });
          });

          // Your existing JavaScript...
     });
</script>
<script>
     document.addEventListener('DOMContentLoaded', function () {
          const $section = document.getElementById('specializationsSection');
          const $viewMode = document.getElementById('specializationsView');
          const $editMode = document.getElementById('specializationsForm');
          const $editBtn = document.getElementById('editSpecializationsBtn');
          const $cancelBtn = document.getElementById('cancelSpecializationsBtn');

          function toggleEditMode() {
               const isEditing = $editMode.classList.contains('hidden');

               // Slide animation
               if (isEditing) {
                    $editMode.classList.remove('hidden');
                    $editMode.classList.add('animate-slide-in');
                    $viewMode.classList.add('hidden');
               } else {
                    $viewMode.classList.remove('hidden');
                    $viewMode.classList.add('animate-slide-in');
                    $editMode.classList.add('hidden');
               }

               // Button animation
               $editBtn.innerHTML = isEditing ?
                    '<i class="fas fa-times mr-2"></i><span>Annuler</span>' :
                    '<i class="fas fa-edit mr-2"></i><span>Modifier</span>';
          }

          $editBtn.addEventListener('click', toggleEditMode);
          $cancelBtn.addEventListener('click', () => {
               $editMode.reset();
               toggleEditMode();
          });

          $editMode.addEventListener('submit', async function (e) {
               e.preventDefault();
               const $submitBtn = this.querySelector('button[type="submit"]');
               $submitBtn.disabled = true;

               try {
                    const formData = new FormData(this);
                    const specializations = Array.from(formData.getAll('specializations[]'));

                    if (specializations.length === 0) {
                         alert('Veuillez sélectionner au moins une spécialisation');
                         $submitBtn.disabled = false;
                         return;
                    }

                    const response = await fetch('/dashboard/profile/update-specializations', {
                         method: 'PUT',
                         headers: { 'Content-Type': 'application/json' },
                         body: JSON.stringify({ specializations })
                    });

                    const result = await response.json();
                    if (response.ok) {
                         window.location.reload();
                    } else {
                         throw new Error(result.message);
                    }
               } catch (error) {
                    alert(error.message || 'Une erreur est survenue');
                    $submitBtn.disabled = false;
               }
          });

          // Add hover effects for specialization cards
          const $cards = document.querySelectorAll('[name="specializations[]"]');
          $cards.forEach(card => {
               card.addEventListener('change', function () {
                    const label = this.closest('label');
                    if (this.checked) {
                         label.classList.add('border-blue-500', 'bg-blue-50');
                         label.classList.remove('border-gray-200');
                    } else {
                         label.classList.remove('border-blue-500', 'bg-blue-50');
                         label.classList.add('border-gray-200');
                    }
               });
          });
     });
</script>

<style>
     @keyframes slideIn {
          from {
               opacity: 0;
               transform: translateY(-10px);
          }

          to {
               opacity: 1;
               transform: translateY(0);
          }
     }

     .animate-slide-in {
          animation: slideIn 0.3s ease-out forwards;
     }
</style>