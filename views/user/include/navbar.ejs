<!-- Navbar Component -->
<nav x-data="{ mobileMenuOpen: false }" class="fixed top-0 left-0 right-0 z-50 bg-white border-b border-gray-100">
     <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div class="flex h-16 md:h-20 items-center justify-between">
               <!-- Logo -->
               <a href="/" class="flex items-center gap-3 shrink-0 group">
                    <div class="h-9 w-9 rounded-xl bg-black flex items-center justify-center transition-transform group-hover:scale-105 duration-300">
                         <span class="text-lg text-white font-bold">N</span>
                    </div>
                    <span class="text-lg font-bold hidden sm:block">NDRESSILIK</span>
               </a>

               <!-- Main Nav - Desktop -->
               <div class="hidden lg:flex items-center justify-center flex-1 gap-1">
                    <% const navItems=[ { href: '/' , label: 'Accueil' , icon: 'fa-home' }, { href: '/services' , label: 'Services' , icon: 'fa-concierge-bell' }, { href: '/about' , label: 'À propos' , icon: 'fa-info-circle' }, { href: '/contact' , label: 'Contact' , icon: 'fa-envelope' } ] %>

                         <% navItems.forEach(item=> { %>
                              <a href="<%= item.href %>" class="flex items-center gap-2 px-5 h-16 text-[15px] text-gray-700 hover:bg-gray-50 transition-all duration-200 relative group">
                                   <i class="fas <%= item.icon %> text-lg"></i>
                                   <span class="font-medium">
                                        <%= item.label %>
                                   </span>
                                   <!-- Hover indicator -->
                                   <div class="absolute bottom-0 left-0 w-full h-1 bg-black scale-x-0 group-hover:scale-x-100 transition-transform duration-300 origin-center"></div>
                              </a>
                              <% }) %>
               </div>

               <!-- Right Section -->
               <div class="flex items-center gap-3 md:gap-4">
                    <!-- Add Service Button (visible on all devices if user is logged in) -->
                    <% if (user) { %>
                         <!-- On mobile, this replaces the user dropdown -->
                         <a href="/dashboard/new-service" class="flex items-center gap-2 h-10 px-5 text-[15px] font-medium text-white bg-black rounded-full hover:bg-gray-800 transition-all duration-200 hover:-translate-y-0.5">
                              <i class="fas fa-plus text-sm"></i>
                              <span>Ajouter</span>
                         </a>
                         <% } %>

                              <!-- User Menu (visible on desktop devices) -->
                              <% if (user) { %>
                                   <div class="relative hidden sm:block" x-data="{ open: false }">
                                        <button @click="open = !open" class="flex items-center gap-3 p-2 hover:bg-gray-50 rounded-full transition-all duration-200 relative group">
                                             <div class="relative w-10 h-10 rounded-full overflow-hidden bg-gray-100">
                                                  <img src="<%= user.image || 'https://api.dicebear.com/7.x/adventurer/svg?seed=' + user.displayName %>" alt="<%= user.displayName %>" class="w-full h-full object-cover" onerror="this.src='https://api.dicebear.com/7.x/adventurer/svg?seed=<%= user.displayName %>'">
                                             </div>
                                             <div class="hidden lg:block text-left">
                                                  <p class="text-[15px] font-medium text-gray-700 line-clamp-1">
                                                       <%= user.displayName %>
                                                  </p>
                                                  <p class="text-xs text-gray-500 line-clamp-1">
                                                       <%= user.email %>
                                                  </p>
                                             </div>
                                             <svg class="w-5 h-5 text-gray-500 transition-transform duration-200" :class="{ 'rotate-180': open }" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                                             </svg>
                                        </button>

                                        <!-- Dropdown -->
                                        <div x-show="open" @click.away="open = false" x-transition class="absolute right-0 mt-2 w-64 bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden">
                                             <div class="p-4 border-b border-gray-100">
                                                  <p class="text-[15px] font-medium text-gray-900">
                                                       <%= user.displayName %>
                                                  </p>
                                                  <p class="text-sm text-gray-500 truncate">
                                                       <%= user.email %>
                                                  </p>
                                             </div>
                                             <div class="p-2">
                                                  <a href="/dashboard" class="flex items-center gap-3 w-full p-3 text-[15px] text-gray-700 hover:bg-gray-50 rounded-xl transition-colors">
                                                       <i class="fas fa-tachometer-alt w-5 h-5"></i>
                                                       <span>Tableau de bord</span>
                                                  </a>
                                                  <a href="/profile" class="flex items-center gap-3 w-full p-3 text-[15px] text-gray-700 hover:bg-gray-50 rounded-xl transition-colors">
                                                       <i class="fas fa-user w-5 h-5"></i>
                                                       <span>Profile</span>
                                                  </a>
                                             </div>
                                             <div class="p-2 border-t border-gray-100">
                                                  <a href="/logout" class="flex items-center gap-3 w-full p-3 text-[15px] text-red-600 hover:bg-red-50 rounded-xl transition-colors">
                                                       <i class="fas fa-sign-out-alt w-5 h-5"></i>
                                                       <span>Déconnexion</span>
                                                  </a>
                                             </div>
                                        </div>
                                   </div>
                                   <% } else { %>
                                        <!-- Login Button -->
                                        <a href="/auth/google" class="flex items-center gap-2 h-10 px-5 text-[15px] font-medium text-white bg-black rounded-full hover:bg-gray-800 transition-all duration-200 hover:-translate-y-0.5">
                                             <i class="fab fa-plus"></i>
                                             <span class=""> service</span>
                                        </a>
                                        <% } %>

                                             <!-- Mobile Menu Button -->
                                             <button @click="mobileMenuOpen = !mobileMenuOpen" class="lg:hidden p-2 text-gray-700 hover:bg-gray-50 rounded-full transition-colors">
                                                  <i class="fas fa-bars text-xl"></i>
                                             </button>
               </div>
          </div>
     </div>

     <!-- Mobile Menu -->
     <div x-show="mobileMenuOpen" x-transition @click.away="mobileMenuOpen = false" class="lg:hidden border-t border-gray-100">
          <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-4 py-2">
               <nav class="grid gap-2">
                    <% navItems.forEach(item=> { %>
                         <a href="<%= item.href %>" class="flex items-center gap-3 p-3 text-[15px] text-gray-700 hover:bg-gray-50 rounded-xl transition-colors">
                              <i class="fas <%= item.icon %> w-5 h-5 text-gray-400"></i>
                              <span class="font-medium">
                                   <%= item.label %>
                              </span>
                         </a>
                         <% }) %>

                              <!-- User Menu Items for Logged-in Users -->
                              <% if (user) { %>
                                   <div class="border-t border-gray-100 mt-2 pt-2">
                                        <a href="/dashboard" class="flex items-center gap-3 p-3 text-[15px] text-gray-700 hover:bg-gray-50 rounded-xl transition-colors">
                                             <i class="fas fa-tachometer-alt w-5 h-5 text-gray-400"></i>
                                             <span>Tableau de bord</span>
                                        </a>
                                        <a href="/profile" class="flex items-center gap-3 p-3 text-[15px] text-gray-700 hover:bg-gray-50 rounded-xl transition-colors">
                                             <i class="fas fa-user w-5 h-5 text-gray-400"></i>
                                             <span>Profile</span>
                                        </a>
                                        <a href="/logout" class="flex items-center gap-3 p-3 text-[15px] text-red-600 hover:bg-red-50 rounded-xl transition-colors">
                                             <i class="fas fa-sign-out-alt w-5 h-5 text-red-600"></i>
                                             <span>Déconnexion</span>
                                        </a>
                                   </div>
                                   <% } %>

                                        <!-- Login Button for Logged-out Users -->
                                        <% if (!user) { %>
                                             <div class="border-t border-gray-100 mt-2 pt-2">
                                                  <a href="/auth/google" class="flex items-center gap-3 p-3 text-[15px] text-gray-700 hover:bg-gray-50 rounded-xl transition-colors">
                                                       <i class="fab fa-plus w-5 h-5 text-gray-400"></i>
                                                       <span>Ajouter un Service</span>
                                                  </a>
                                             </div>
                                             <% } %>
               </nav>
          </div>
     </div>
</nav>


<!-- Styles -->
<style>
     /* Smooth transitions */
     * {
          transition-property: all;
          transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
          transition-duration: 200ms;
     }

     /* Account for fixed navbar */
     body {
          padding-top: 64px;
     }

     @media (min-width: 768px) {
          body {
               padding-top: 80px;
          }
     }

     /* Hide scrollbar but keep functionality */
     .no-scrollbar {
          scrollbar-width: none;
          -ms-overflow-style: none;
     }

     .no-scrollbar::-webkit-scrollbar {
          display: none;
     }

     /* Focus styles */
     :focus-visible {
          outline: 2px solid black;
          outline-offset: 2px;
     }

     /* Better tap targets for mobile */
     @media (max-width: 768px) {

          button,
          a {
               min-height: 44px;
               min-width: 44px;
          }
     }

     /* Reduce motion if preferred */
     @media (prefers-reduced-motion: reduce) {
          * {
               animation-duration: 0.01ms !important;
               transition-duration: 0.01ms !important;
               scroll-behavior: auto !important;
          }
     }
</style>