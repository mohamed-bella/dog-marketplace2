  <!-- Collapsible Opportunities Alert -->
                <div class="mb-8">
                    <% if (showConsultationAlert && (stats.pendingPaidCount> 0 || stats.pendingFreeCount > 0)) { %>
                        <div class="bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-100 rounded-xl overflow-hidden" x-data="{ isOpen: false }">
                            <!-- Header - Always Visible -->
                            <button @click="isOpen = !isOpen" class="w-full p-4 flex items-center justify-between hover:bg-white/40 transition-colors">
                                <div class="flex items-center gap-3">
                                    <div class="relative">
                                        <i class="fas fa-bell text-blue-600 text-lg"></i>
                                        <!-- Animated Ping Effect -->
                                        <span class="absolute -top-1 -right-1 h-3 w-3">
                                            <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-blue-400 opacity-75"></span>
                                            <span class="relative inline-flex rounded-full h-3 w-3 bg-blue-500"></span>
                                        </span>
                                    </div>
                                    <div class="flex items-baseline gap-2">
                                        <h3 class="font-semibold text-gray-900">
                                            Nouvelles opportunit√©s
                                        </h3>
                                        <span class="text-sm text-blue-600 font-medium">
                                            <%= stats.pendingPaidCount + stats.pendingFreeCount %> en attente
                                        </span>
                                    </div>
                                </div>

                                <!-- Toggle Icon -->
                                <div class="flex items-center gap-3">
                                    <div class="flex items-center gap-1.5 text-sm text-gray-500">
                                        <i class="fas fa-coins text-amber-500"></i>
                                        <span>
                                            <%= stats.potentialEarnings %> DH
                                        </span>
                                    </div>
                                    <i class="fas fa-chevron-down text-gray-400 transition-transform duration-300" :class="{ 'rotate-180': isOpen }"></i>
                                </div>
                            </button>

                            <!-- Expandable Content -->
                            <div x-show="isOpen" x-collapse x-cloak class="border-t border-blue-100">
                                <div class="p-6 space-y-6">
                                    <!-- Stats Grid -->
                                    <div class="grid grid-cols-2 sm:grid-cols-4 gap-4">
                                        <!-- Paid Consultations -->
                                        <div class="bg-white/60 rounded-xl p-4">
                                            <div class="text-sm text-gray-500 mb-1">Consultations payantes</div>
                                            <div class="flex items-baseline gap-2">
                                                <span class="text-2xl font-bold text-gray-900">
                                                    <%= stats.pendingPaidCount %>
                                                </span>
                                                <% if (stats.pendingPaidCount> 0) { %>
                                                    <span class="text-sm text-green-600 font-medium">
                                                        <%= stats.potentialEarnings %> DH
                                                    </span>
                                                    <% } %>
                                            </div>
                                        </div>

                                        <!-- Free Consultations -->
                                        <div class="bg-white/60 rounded-xl p-4">
                                            <div class="text-sm text-gray-500 mb-1">Consultations gratuites</div>
                                            <div class="flex items-baseline gap-2">
                                                <span class="text-2xl font-bold text-gray-900">
                                                    <%= stats.pendingFreeCount %>
                                                </span>
                                                <span class="text-sm text-blue-600 font-medium">En attente</span>
                                            </div>
                                        </div>

                                       

                                      
                                    </div>

                                    <!-- Action Section -->
                                    <div class="flex items-center justify-between pt-4 border-t border-blue-100">
                                        <p class="text-sm text-gray-600">
                                            R√©pondez rapidement pour augmenter vos chances d'√™tre s√©lectionn√© !
                                        </p>
                                        <a href="/dashboard/consultations" class="inline-flex items-center gap-2 px-6 py-2.5 bg-blue-600 text-white 
                             rounded-lg hover:bg-blue-700 transition-colors">
                                            <span>R√©pondre</span>
                                            <i class="fas fa-arrow-right"></i>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <% } %>
                </div>

                <!-- Alpine.js Styles -->
                <style>
                    [x-cloak] {
                        display: none !important;
                    }

                    @keyframes ping {

                        75%,
                        100% {
                            transform: scale(2);
                            opacity: 0;
                        }
                    }

                    .animate-ping {
                        animation: ping 2s cubic-bezier(0, 0, 0.2, 1) infinite;
                    }

                    /* Smooth collapse animation */
                    .collapse-enter-active,
                    .collapse-leave-active {
                        transition: all 0.3s ease-in-out;
                        overflow: hidden;
                    }

                    .collapse-enter-from,
                    .collapse-leave-to {
                        opacity: 0;
                        max-height: 0px;
                    }

                    .collapse-enter-to,
                    .collapse-leave-from {
                        opacity: 1;
                        max-height: 1000px;
                    }
                </style>

                <script>
                    // Optional: Add this if you want to auto-expand based on certain conditions
                    document.addEventListener('alpine:init', () => {
                        Alpine.data('opportunitiesAlert', () => ({
                            isOpen: false,

                            init() {
                                // Auto-expand if there are high-value opportunities
                                if (this.stats.potentialEarnings > 1000) {
                                    this.isOpen = true;
                                }
                            }
                        }));
                    });
                </script>






                ################ top provider 
                // <section class="bg-white py-12 lg:py-20">
//     <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
//         <!-- Header -->
//         <div class="flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-12">
//             <div>
//                 <h2 class="text-3xl lg:text-4xl font-bold text-gray-800 relative inline-block">
//                     Top Services
//                     <div class="absolute -bottom-2 left-0 w-20 h-1 bg-gray-800"></div>
//                 </h2>
//                 <p class="mt-4 text-gray-600">Top Prestataires des Services Canine</p>
//             </div>
//             <a href="/top-users" 
//                class="inline-flex items-center gap-2 px-6 py-3 bg-gray-800 text-white hover:bg-gray-700 transition-all text-sm font-medium group">
//                <span>Tous Les Profiles</span>
//                <svg class="w-4 h-4 transform group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
//                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/>
//                </svg>
//             </a>
//         </div>

//         <!-- Rank Categories -->
//         <div class="flex items-center justify-center gap-8 mb-12 overflow-x-auto py-4 scrollbar-hide">
//             <div class="flex flex-col items-center min-w-[100px]">
//                 <div class="w-12 h-12 bg-yellow-400 rounded-full flex items-center justify-center shadow-lg mb-3">
//                     <span class="text-2xl">üèÜ</span>
//                 </div>
//                 <span class="text-sm font-medium text-gray-800">Top Elite</span>
//                 <span class="text-xs text-gray-500 mt-1">100+ points</span>
//             </div>

//             <div class="flex flex-col items-center min-w-[100px]">
//                 <div class="w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center shadow-lg mb-3">
//                     <span class="text-2xl">üíé</span>
//                 </div>
//                 <span class="text-sm font-medium text-gray-800">Expert</span>
//                 <span class="text-xs text-gray-500 mt-1">50+ points</span>
//             </div>

//             <div class="flex flex-col items-center min-w-[100px]">
//                 <div class="w-12 h-12 bg-orange-500 rounded-full flex items-center justify-center shadow-lg mb-3">
//                     <span class="text-2xl">‚≠ê</span>
//                 </div>
//                 <span class="text-sm font-medium text-gray-800">Pro</span>
//                 <span class="text-xs text-gray-500 mt-1">25+ points</span>
//             </div>
//         </div>

//         <!-- Providers Grid -->
//         <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
//             <% topUsers.slice(0, 3).forEach((user, index) => { %>
//                 <div class="provider-card group">
//                     <!-- Achievement Badge -->
//                     <div class="absolute -top-3 left-1/2 -translate-x-1/2 z-20">
//                         <div class="px-4 py-1.5 text-sm font-semibold rounded-full shadow-sm
//                             <%= index === 0 ? 'bg-yellow-400 text-gray-800' : 
//                                index === 1 ? 'bg-gray-200 text-gray-800' : 
//                                'bg-orange-500 text-white' %>">
//                             <%= index === 0 ? 'Top Elite' : index === 1 ? 'Expert' : 'Pro' %>
//                         </div>
//                     </div>

//                     <!-- Provider Card -->
//                     <div class="relative bg-white p-6 pt-10 rounded-lg
//                          hover:shadow-xl transition-all duration-300 border-2
//                         <%= index === 0 ? 'border-yellow-400' : 
//                            index === 1 ? 'border-gray-200' : 
//                            'border-orange-500' %>">
                        
//                         <!-- Stats Banner -->
//                         <div class="absolute top-4 right-4 flex items-center gap-2">
//                             <div class="px-3 py-1 bg-gray-50 rounded-full text-sm font-medium">
//                                 Niveau <%= Math.floor(user.totalScore / 50) + 1 %>
//                             </div>
//                             <div class="w-8 h-8 rounded-full bg-gray-800 text-white flex items-center justify-center text-sm font-bold">
//                                 <%= index + 1 %>
//                             </div>
//                         </div>

//                         <!-- User Info -->
//                         <div class="flex items-center gap-6">
//                             <div class="relative cursor-pointer group" onclick="window.location.href='/@<%= user.slug %>'">
//                                 <div class="w-20 h-20 rounded-full overflow-hidden ring-2 ring-offset-2 transition-all duration-300
//                                     <%= index === 0 ? 'ring-yellow-400' : 
//                                        index === 1 ? 'ring-gray-300' : 
//                                        'ring-orange-500' %>">
//                                     <img src="<%= user.profileImage %>" 
//                                          alt="<%= user.displayName %>"
//                                          class="w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-300"
//                                     />
//                                 </div>
//                                 <div class="absolute -bottom-1 -right-1 w-8 h-8 bg-white rounded-full shadow-lg flex items-center justify-center text-lg">
//                                     <%= user.totalScore >= 100 ? 'üëë' : user.totalScore >= 50 ? 'üåü' : '‚ú®' %>
//                                 </div>
//                             </div>

//                             <div>
//                                 <h2 class="text-xl font-bold text-gray-800"><%= user.displayName %></h2>
//                                 <!-- Achievement Tags -->
//                                 <div class="flex flex-wrap gap-2 mt-2">
//                                     <% if (user.totalViews >= 50) { %>
//                                         <span class="px-3 py-1 bg-blue-50 text-blue-600 rounded-full text-sm">Populaire</span>
//                                     <% } %>
//                                     <% if (user.totalReviews >= 5) { %>
//                                         <span class="px-3 py-1 bg-green-50 text-green-600 rounded-full text-sm">Top Rated</span>
//                                     <% } %>
//                                 </div>
//                             </div>
//                         </div>

//                         <!-- Stats & Progress -->
//                         <div class="mt-8 space-y-6">
//                             <!-- Progress to Next Level -->
//                             <div>
//                                 <div class="flex justify-between text-sm mb-2">
//                                     <span class="text-gray-600">Progression niveau <%= Math.floor(user.totalScore / 50) + 2 %></span>
//                                     <span class="font-medium"><%= user.totalScore %> / <%= (Math.floor(user.totalScore / 50) + 1) * 50 %></span>
//                                 </div>
//                                 <div class="h-2 bg-gray-100 rounded-full overflow-hidden">
//                                     <div class="h-full transition-all duration-500 ease-out
//                                         <%= index === 0 ? 'bg-yellow-400' : 
//                                            index === 1 ? 'bg-gray-400' : 
//                                            'bg-orange-500' %>"
//                                         style="width: <%= Math.min((user.totalScore % 50) / 50 * 100, 100) %>%">
//                                     </div>
//                                 </div>
//                             </div>

//                             <!-- Stats Grid -->
//                             <div class="grid grid-cols-3 gap-4">
//                                 <div class="p-4 rounded-lg bg-gray-50 hover:bg-gray-100 transition-colors cursor-pointer">
//                                     <div class="text-center">
//                                         <div class="text-2xl font-bold text-gray-800"><%= user.totalViews %></div>
//                                         <div class="text-sm text-gray-500 mt-1">Vues</div>
//                                     </div>
//                                 </div>
//                                 <div class="p-4 rounded-lg bg-gray-50 hover:bg-gray-100 transition-colors cursor-pointer">
//                                     <div class="text-center">
//                                         <div class="text-2xl font-bold text-gray-800"><%= user.totalReviews %></div>
//                                         <div class="text-sm text-gray-500 mt-1">Avis</div>
//                                     </div>
//                                 </div>
//                                 <div class="p-4 rounded-lg bg-gray-50 hover:bg-gray-100 transition-colors cursor-pointer">
//                                     <div class="text-center">
//                                         <div class="text-2xl font-bold text-gray-800"><%= user.totalScore %></div>
//                                         <div class="text-sm text-gray-500 mt-1">Score</div>
//                                     </div>
//                                 </div>
//                             </div>
//                         </div>

//                         <!-- Action Button -->
//                         <button onclick="window.location.href='/@<%= user.slug %>'" 
//                                 class="w-full mt-6 flex items-center justify-center gap-2 px-6 py-4 
//                                        bg-gray-800 text-white hover:bg-gray-700 
//                                        transition-all text-sm font-medium group">
//                             <span>Voir le profil</span>
//                             <svg class="w-4 h-4 transform group-hover:translate-x-1 transition-transform" 
//                                  fill="none" stroke="currentColor" viewBox="0 0 24 24">
//                                 <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
//                                       d="M17 8l4 4m0 0l-4 4m4-4H3"/>
//                             </svg>
//                         </button>
//                     </div>
//                 </div>
//             <% }) %>
//         </div>
//     </div>
// </section>

// <style>
// .scrollbar-hide::-webkit-scrollbar {
//     display: none;
// }
// .scrollbar-hide {
//     -ms-overflow-style: none;
//     scrollbar-width: none;
// }
// </style>

