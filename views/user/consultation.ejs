<!-- Complete Consultation Section -->
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ndressilik - Consultation</title>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <!-- Google Fonts - Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Tailwind CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        primary: {
                            50: '#f0f9ff',
                            100: '#e0f2fe',
                            200: '#bae6fd',
                            300: '#7dd3fc',
                            400: '#38bdf8',
                            500: '#0ea5e9',
                            600: '#0284c7',
                            700: '#0369a1',
                        },
                    },
                }
            }
        }
    </script>
</head>
<body class="bg-gray-50">
<!-- Main Consultation Section -->
<section class="min-h-screen bg-gray-50 bg-[radial-gradient(#e5e7eb_1px,transparent_1px)] bg-[size:20px_20px] py-12 px-4">
    <div class="max-w-3xl mx-auto">
        <!-- Section Header -->
        <div class="text-center mb-12">
            <span class="inline-flex items-center px-4 py-1.5 rounded-full text-sm font-semibold bg-primary-50 text-primary-600">
                <i class="fas fa-comments-alt mr-2"></i>
                Service de Consultation
            </span>
            <h1 class="mt-4 text-3xl font-bold text-gray-900">Besoin d'aide avec votre chien ?</h1>
            <p class="mt-4 text-lg text-gray-600 max-w-2xl mx-auto">
                Notre équipe d'experts est là pour vous aider. Décrivez votre situation et nous vous accompagnerons vers la meilleure solution.
            </p>
        </div>

        <!-- Main Form Container -->
        <div class="bg-white/80 backdrop-blur-lg rounded-2xl border border-gray-100 p-8 shadow-sm">
            <form id="consultationForm" class="space-y-8">
                <!-- Consultation Type Selection -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-4">Type de consultation</label>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                        <!-- Free Option -->
                        <div class="consultation-card group" data-type="free">
                            <input type="radio" name="consultationType" value="free" class="sr-only" required>
                            <div class="h-full p-6 border-2 border-gray-100 rounded-xl cursor-pointer transition-all duration-200">
                                <div class="flex justify-between items-start mb-4">
                                    <div class="w-12 h-12 rounded-xl bg-gray-50 flex items-center justify-center group-hover:scale-110 transition-transform">
                                        <i class="fas fa-comments text-gray-400 text-xl"></i>
                                    </div>
                                    <span class="px-3 py-1 text-sm bg-gray-100 text-gray-600 rounded-full">
                                        Gratuit
                                    </span>
                                </div>
                                <h3 class="text-lg font-semibold text-gray-900 mb-2">Consultation Simple</h3>
                                <ul class="space-y-2 text-sm text-gray-600">
                                    <li class="flex items-center">
                                        <i class="fas fa-check text-green-500 mr-2"></i>
                                        Réponse sous 48h
                                    </li>
                                    <li class="flex items-center">
                                        <i class="fas fa-check text-green-500 mr-2"></i>
                                        Conseils de base
                                    </li>
                                    <li class="flex items-center">
                                        <i class="fas fa-check text-green-500 mr-2"></i>
                                        Par email
                                    </li>
                                </ul>
                            </div>
                        </div>

                        <!-- Paid Option -->
                        <div class="consultation-card group" data-type="paid">
                            <input type="radio" name="consultationType" value="paid" class="sr-only" required>
                            <div class="h-full p-6 border-2 border-gray-100 rounded-xl cursor-pointer transition-all duration-200">
                                <div class="flex justify-between items-start mb-4">
                                    <div class="w-12 h-12 rounded-xl bg-primary-50 flex items-center justify-center group-hover:scale-110 transition-transform">
                                        <i class="fas fa-star text-primary-500 text-xl"></i>
                                    </div>
                                    <span class="px-3 py-1 text-sm bg-primary-50 text-primary-600 rounded-full">
                                        200 DH
                                    </span>
                                </div>
                                <h3 class="text-lg font-semibold text-gray-900 mb-2">Consultation Pro</h3>
                                <ul class="space-y-2 text-sm text-gray-600">
                                    <li class="flex items-center">
                                        <i class="fas fa-check text-green-500 mr-2"></i>
                                        Appel vidéo 30min
                                    </li>
                                    <li class="flex items-center">
                                        <i class="fas fa-check text-green-500 mr-2"></i>
                                        Solutions personnalisées
                                    </li>
                                    <li class="flex items-center">
                                        <i class="fas fa-check text-green-500 mr-2"></i>
                                        Suivi 1 semaine
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Problem Category -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-4">Type de problème</label>
                    <div class="grid grid-cols-2 sm:grid-cols-4 gap-4">
                        <!-- Behavior Category -->
                        <div class="category-card group" data-category="behavior">
                            <input type="radio" name="category" value="behavior" class="sr-only" required>
                            <div class="p-4 border-2 border-gray-100 rounded-xl cursor-pointer text-center transition-all duration-200">
                                <div class="w-12 h-12 mx-auto rounded-xl bg-rose-50 flex items-center justify-center mb-3 group-hover:scale-110 transition-transform">
                                    <i class="fas fa-brain text-rose-500"></i>
                                </div>
                                <span class="text-sm font-medium text-gray-900">Comportement</span>
                            </div>
                        </div>

                        <!-- Training Category -->
                        <div class="category-card group" data-category="training">
                            <input type="radio" name="category" value="training" class="sr-only" required>
                            <div class="p-4 border-2 border-gray-100 rounded-xl cursor-pointer text-center transition-all duration-200">
                                <div class="w-12 h-12 mx-auto rounded-xl bg-blue-50 flex items-center justify-center mb-3 group-hover:scale-110 transition-transform">
                                    <i class="fas fa-graduation-cap text-blue-500"></i>
                                </div>
                                <span class="text-sm font-medium text-gray-900">Éducation</span>
                            </div>
                        </div>

                        <!-- Health Category -->
                        <div class="category-card group" data-category="health">
                            <input type="radio" name="category" value="health" class="sr-only" required>
                            <div class="p-4 border-2 border-gray-100 rounded-xl cursor-pointer text-center transition-all duration-200">
                                <div class="w-12 h-12 mx-auto rounded-xl bg-green-50 flex items-center justify-center mb-3 group-hover:scale-110 transition-transform">
                                    <i class="fas fa-heartbeat text-green-500"></i>
                                </div>
                                <span class="text-sm font-medium text-gray-900">Santé</span>
                            </div>
                        </div>

                        <!-- Other Category -->
                        <div class="category-card group" data-category="other">
                            <input type="radio" name="category" value="other" class="sr-only" required>
                            <div class="p-4 border-2 border-gray-100 rounded-xl cursor-pointer text-center transition-all duration-200">
                                <div class="w-12 h-12 mx-auto rounded-xl bg-purple-50 flex items-center justify-center mb-3 group-hover:scale-110 transition-transform">
                                    <i class="fas fa-question-circle text-purple-500"></i>
                                </div>
                                <span class="text-sm font-medium text-gray-900">Autre</span>
                            </div>
                        </div>
                    </div>
                </div>
<!-- Dog Information -->
<div class="space-y-6">
     <label class="block text-sm font-medium text-gray-700">Information du chien</label>
     <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
         <!-- Dog Name -->
         <div class="relative">
             <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                 <i class="fas fa-paw text-gray-400"></i>
             </div>
             <input 
                 type="text" 
                 name="dogName" 
                 placeholder="Nom du chien"
                 class="block w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors"
                 required
             >
         </div>

         <!-- Dog Age -->
         <div class="relative">
             <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                 <i class="fas fa-birthday-cake text-gray-400"></i>
             </div>
             <input 
                 type="text" 
                 name="dogAge" 
                 placeholder="Âge du chien"
                 class="block w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors"
             >
         </div>

         <!-- Dog Breed -->
         <div class="relative">
             <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                 <i class="fas fa-dog text-gray-400"></i>
             </div>
             <input 
                 type="text" 
                 name="dogBreed" 
                 placeholder="Race du chien"
                 class="block w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors"
             >
         </div>

         <!-- Dog Gender -->
         <div class="relative">
             <select 
                 name="dogGender"
                 class="block w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors appearance-none"
             >
                 <option value="">Sélectionner le sexe</option>
                 <option value="male">Mâle</option>
                 <option value="female">Femelle</option>
             </select>
             <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                 <i class="fas fa-venus-mars text-gray-400"></i>
             </div>
         </div>
     </div>
 </div>

 <!-- Contact Information -->
 <div class="space-y-6">
     <label class="block text-sm font-medium text-gray-700">Vos informations</label>
     <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
         <!-- Name -->
         <div class="relative">
             <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                 <i class="fas fa-user text-gray-400"></i>
             </div>
             <input 
                 type="text" 
                 name="ownerName" 
                 placeholder="Votre nom complet"
                 class="block w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors"
                 required
             >
         </div>

         <!-- Email -->
         <div class="relative">
             <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                 <i class="fas fa-envelope text-gray-400"></i>
             </div>
             <input 
                 type="email" 
                 name="email" 
                 placeholder="Votre email"
                 class="block w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors"
                 required
             >
         </div>

         <!-- Phone -->
         <div class="relative">
             <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                 <i class="fas fa-phone text-gray-400"></i>
             </div>
             <input 
                 type="tel" 
                 name="phone" 
                 placeholder="Votre numéro de téléphone"
                 class="block w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors"
                 required
             >
         </div>

         <!-- Preferred Contact Method -->
         <div class="relative">
             <select 
                 name="preferredContact"
                 class="block w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors appearance-none"
                 required
             >
                 <option value="">Moyen de contact préféré</option>
                 <option value="whatsapp">WhatsApp</option>
                 <option value="phone">Téléphone</option>
                 <option value="email">Email</option>
             </select>
             <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                 <i class="fas fa-comments text-gray-400"></i>
             </div>
         </div>
     </div>
 </div>

 <!-- Problem Description -->
 <div class="space-y-4">
     <label class="block text-sm font-medium text-gray-700">Description du problème</label>
     <div class="relative">
         <textarea 
             name="description" 
             rows="4" 
             placeholder="Décrivez en détail le problème que vous rencontrez avec votre chien..."
             class="block w-full p-4 border border-gray-200 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors resize-none"
             required
         ></textarea>
     </div>
 </div>

 <!-- Availability -->
 <div class="space-y-4">
     <label class="block text-sm font-medium text-gray-700">Disponibilités préférées</label>
     <div class="grid grid-cols-2 sm:grid-cols-4 gap-3">
         <label class="relative flex items-center justify-center p-3 border border-gray-200 rounded-xl cursor-pointer hover:border-primary-200 transition-all">
             <input type="checkbox" name="availability[]" value="morning" class="sr-only peer">
             <div class="text-center">
                 <i class="fas fa-sun mb-2 text-gray-400 peer-checked:text-primary-500"></i>
                 <p class="text-sm text-gray-600 peer-checked:text-primary-600">Matin</p>
             </div>
         </label>
         <label class="relative flex items-center justify-center p-3 border border-gray-200 rounded-xl cursor-pointer hover:border-primary-200 transition-all">
             <input type="checkbox" name="availability[]" value="afternoon" class="sr-only peer">
             <div class="text-center">
                 <i class="fas fa-cloud-sun mb-2 text-gray-400 peer-checked:text-primary-500"></i>
                 <p class="text-sm text-gray-600 peer-checked:text-primary-600">Après-midi</p>
             </div>
         </label>
         <label class="relative flex items-center justify-center p-3 border border-gray-200 rounded-xl cursor-pointer hover:border-primary-200 transition-all">
             <input type="checkbox" name="availability[]" value="evening" class="sr-only peer">
             <div class="text-center">
                 <i class="fas fa-moon mb-2 text-gray-400 peer-checked:text-primary-500"></i>
                 <p class="text-sm text-gray-600 peer-checked:text-primary-600">Soir</p>
             </div>
         </label>
         <label class="relative flex items-center justify-center p-3 border border-gray-200 rounded-xl cursor-pointer hover:border-primary-200 transition-all">
             <input type="checkbox" name="availability[]" value="weekend" class="sr-only peer">
             <div class="text-center">
                 <i class="fas fa-calendar mb-2 text-gray-400 peer-checked:text-primary-500"></i>
                 <p class="text-sm text-gray-600 peer-checked:text-primary-600">Weekend</p>
             </div>
         </label>
     </div>
 </div>

 <!-- Submit Button -->
 <div class="pt-6">
     <button 
         type="submit" 
         id="submitButton"
         class="w-full py-4 px-6 bg-primary-600 text-white rounded-xl hover:bg-primary-700 
                focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 
                transition-all duration-200 flex items-center justify-center gap-2
                disabled:opacity-50 disabled:cursor-not-allowed"
         
     >
         <span>Envoyer la demande</span>
         <i class="fas fa-paper-plane"></i>
     </button>
 </div>
</form>
</div>

<!-- Trust Indicators -->
<div class="mt-8 grid grid-cols-1 sm:grid-cols-3 gap-4">
<div class="bg-white/80 backdrop-blur-lg rounded-xl p-4 flex items-center gap-3">
 <div class="w-10 h-10 bg-green-50 rounded-lg flex items-center justify-center flex-shrink-0">
     <i class="fas fa-check-circle text-green-500"></i>
 </div>
 <div>
     <h4 class="font-medium text-gray-900">Experts Certifiés</h4>
     <p class="text-sm text-gray-600">Professionnels qualifiés</p>
 </div>
</div>
<div class="bg-white/80 backdrop-blur-lg rounded-xl p-4 flex items-center gap-3">
 <div class="w-10 h-10 bg-blue-50 rounded-lg flex items-center justify-center flex-shrink-0">
     <i class="fas fa-clock text-blue-500"></i>
 </div>
 <div>
     <h4 class="font-medium text-gray-900">Réponse Rapide</h4>
     <p class="text-sm text-gray-600">Sous 24h maximum</p>
 </div>
</div>
<div class="bg-white/80 backdrop-blur-lg rounded-xl p-4 flex items-center gap-3">
 <div class="w-10 h-10 bg-purple-50 rounded-lg flex items-center justify-center flex-shrink-0">
     <i class="fas fa-shield-alt text-purple-500"></i>
 </div>
 <div>
     <h4 class="font-medium text-gray-900">Confidentialité</h4>
     <p class="text-sm text-gray-600">Données sécurisées</p>
 </div>
</div>
</div>
</div>
</section>

<!-- Add this before closing body tag -->

<style>
     /* Base Styles */
     .consultation-card.selected > div,
     .category-card.selected > div {
         border-color: rgb(var(--color-primary-500));
         background-color: rgb(var(--color-primary-50));
     }
     
     /* Custom Radio and Checkbox Styles */
     .custom-radio, .custom-checkbox {
         position: relative;
         padding-left: 28px;
         cursor: pointer;
         user-select: none;
     }
     
     /* Animations */
     @keyframes slideUp {
         from {
             transform: translateY(10px);
             opacity: 0;
         }
         to {
             transform: translateY(0);
             opacity: 1;
         }
     }
     
     @keyframes slideDown {
         from {
             transform: translateY(-10px);
             opacity: 0;
         }
         to {
             transform: translateY(0);
             opacity: 1;
         }
     }
     
     @keyframes fadeIn {
         from { opacity: 0; }
         to { opacity: 1; }
     }
     
     @keyframes spin {
         to { transform: rotate(360deg); }
     }
     
     /* Loading Animation */
     .loading-spinner {
         border: 3px solid #f3f3f3;
         border-radius: 50%;
         border-top: 3px solid #3498db;
         width: 20px;
         height: 20px;
         animation: spin 1s linear infinite;
     }
     
     /* Toast Notifications */
     .toast {
         position: fixed;
         bottom: 20px;
         right: 20px;
         padding: 16px 24px;
         border-radius: 8px;
         color: white;
         animation: slideUp 0.3s ease-out;
         z-index: 1000;
     }
     
     .toast.success {
         background-color: #10B981;
     }
     
     .toast.error {
         background-color: #EF4444;
     }
     
     /* Form Validation Styles */
     .input-error {
         border-color: #EF4444 !important;
     }
     
     .error-message {
         color: #EF4444;
         font-size: 0.875rem;
         margin-top: 0.25rem;
         animation: slideDown 0.2s ease-out;
     }
     
     /* Card Hover Effects */
     .consultation-card > div:hover,
     .category-card > div:hover {
         transform: translateY(-2px);
         box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
     }
     </style>
     
     <script>
          document.addEventListener('DOMContentLoaded', function() {
              const form = document.getElementById('consultationForm');
              const submitButton = document.getElementById('submitButton');
              let hasAttemptedSubmit = false; // Track if form has been submitted
          
              // Card Selection Handling
              function handleCardSelection() {
                  const consultationCards = document.querySelectorAll('.consultation-card');
                  const categoryCards = document.querySelectorAll('.category-card');
                  
                  // Consultation Type Cards
                  consultationCards.forEach(card => {
                      card.addEventListener('click', () => {
                          consultationCards.forEach(c => c.classList.remove('selected'));
                          card.classList.add('selected');
                          const radio = card.querySelector('input[type="radio"]');
                          radio.checked = true;
                          if (hasAttemptedSubmit) validateForm();
                      });
                  });
                  
                  // Category Cards
                  categoryCards.forEach(card => {
                      card.addEventListener('click', () => {
                          categoryCards.forEach(c => c.classList.remove('selected'));
                          card.classList.add('selected');
                          const radio = card.querySelector('input[type="radio"]');
                          radio.checked = true;
                          if (hasAttemptedSubmit) validateForm();
                      });
                  });
              }
          
              // Form Validation
              function validateForm() {
                  const requiredFields = form.querySelectorAll('[required]');
                  let isValid = true;
                  
                  // Clear previous errors
                  clearErrors();
                  
                  // Only validate if form has been attempted to submit
                  if (hasAttemptedSubmit) {
                      requiredFields.forEach(field => {
                          if (!field.value.trim()) {
                              isValid = false;
                              showFieldError(field, 'Ce champ est requis');
                          } else if (field.type === 'email' && !isValidEmail(field.value)) {
                              isValid = false;
                              showFieldError(field, 'Email invalide');
                          } else if (field.type === 'tel' && !isValidPhone(field.value)) {
                              isValid = false;
                              showFieldError(field, 'Numéro de téléphone invalide');
                          }
                      });
                      
                      // Check consultation type and category
                      const consultationType = form.querySelector('input[name="consultationType"]:checked');
                      const category = form.querySelector('input[name="category"]:checked');
                      
                      if (!consultationType) {
                          isValid = false;
                          showToast('Veuillez sélectionner un type de consultation', 'error');
                      }
                      if (!category) {
                          isValid = false;
                          showToast('Veuillez sélectionner une catégorie', 'error');
                      }
                  }
                  
                  return isValid;
              }
          
              // Clear all error messages
              function clearErrors() {
                  form.querySelectorAll('.error-message').forEach(msg => msg.remove());
                  form.querySelectorAll('.input-error').forEach(input => input.classList.remove('input-error'));
              }
          
              // Field Error Display
              function showFieldError(field, message) {
                  const wrapper = field.closest('.relative') || field.parentElement;
                  field.classList.add('input-error');
                  
                  const errorDiv = document.createElement('div');
                  errorDiv.className = 'error-message';
                  errorDiv.innerHTML = message;
                  
                  wrapper.appendChild(errorDiv);
              }
          
              // Form Submission
              form.addEventListener('submit', async (e) => {
                  e.preventDefault();
                  hasAttemptedSubmit = true;
                  
                  if (!validateForm()) return;
                  
                  // Show loading state
                  submitButton.disabled = true;
                  const originalButtonText = submitButton.innerHTML;
                  submitButton.innerHTML = `
                      <span class="loading-spinner mr-2"></span>
                      Envoi en cours...
                  `;
                  
                  try {
                      // Prepare form data
                      const formData = new FormData(form);
                      const data = Object.fromEntries(formData.entries());
          
                      // Add arrays for checkboxes
                      data.availability = Array.from(formData.getAll('availability[]'));
          
                      // Send to backend
                      const response = await fetch('/consultations/submit', {
                          method: 'POST',
                          headers: {
                              'Content-Type': 'application/json',
                          },
                          body: JSON.stringify(data)
                      });
          
                      const result = await response.json();
          
                      if (response.ok) {
                          showToast('Votre demande a été envoyée avec succès!', 'success');
                          form.reset();
                          document.querySelectorAll('.selected').forEach(el => el.classList.remove('selected'));
                          hasAttemptedSubmit = false;
                          clearErrors();
                      } else {
                          throw new Error(result.error || 'Une erreur est survenue');
                      }
                      
                  } catch (error) {
                      showToast(error.message || 'Une erreur est survenue. Veuillez réessayer.', 'error');
                  } finally {
                      submitButton.disabled = false;
                      submitButton.innerHTML = originalButtonText;
                  }
              });
          
              // Utility Functions
              function isValidEmail(email) {
                  return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
              }
              
              function isValidPhone(phone) {
                  return /^[\d\s+\-()]{8,}$/.test(phone);
              }
              
              function showToast(message, type = 'success') {
                  const toast = document.createElement('div');
                  toast.className = `toast ${type}`;
                  toast.innerHTML = `
                      <div class="flex items-center">
                          <i class="fas fa-${type === 'success' ? 'check-circle' : 'exclamation-circle'} mr-2"></i>
                          <span>${message}</span>
                      </div>
                  `;
                  
                  document.body.appendChild(toast);
                  
                  setTimeout(() => {
                      toast.style.animation = 'slideDown 0.3s ease-in forwards';
                      setTimeout(() => toast.remove(), 300);
                  }, 3000);
              }
          
              // Real-time validation only after first submit attempt
              form.querySelectorAll('input, textarea, select').forEach(field => {
                  field.addEventListener('input', () => {
                      if (hasAttemptedSubmit) {
                          validateForm();
                      }
                  });
              });
          
              // Handle availability checkboxes
              document.querySelectorAll('input[name="availability[]"]').forEach(checkbox => {
                  checkbox.addEventListener('change', function() {
                      const container = this.closest('label');
                      if (this.checked) {
                          container.classList.add('border-primary-500', 'bg-primary-50');
                      } else {
                          container.classList.remove('border-primary-500', 'bg-primary-50');
                      }
                  });
              });
          
              // Initialize
              handleCardSelection();
          });
          </script>
     
     </body>
     </html>