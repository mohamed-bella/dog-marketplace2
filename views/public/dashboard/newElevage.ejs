<%- include('./partials/head') %>

     <div class="container mt-5">
          <h2 class="text-center mb-4">Créer un nouvel élevage</h2>

          <div class="row">
               <!-- Multi-step Form Section -->
               <div class="col-lg-6 col-md-12">
                    <form id="elevageForm" action="/dashboard/elevage/new" method="POST">
                         <!-- Progress Bar -->
                         <div class="progress mb-4">
                              <div id="progressBar" class="progress-bar" role="progressbar" style="width: 33%;" aria-valuenow="33" aria-valuemin="0" aria-valuemax="100">Étape 1</div>
                         </div>

                         <!-- Step 1: General Details -->
                         <div class="step">
                              <div class="mb-3">
                                   <label for="name" class="form-label">Nom de l'élevage</label>
                                   <input type="text" class="form-control" id="name" name="name" placeholder="Entrez le nom de votre élevage" required>
                              </div>

                              <div class="mb-3">
                                   <label for="description" class="form-label">Description</label>
                                   <textarea class="form-control" id="description" name="description" rows="4" placeholder="Décrivez votre élevage" required></textarea>
                              </div>

                              <button type="button" class="btn btn-primary next-btn">Suivant</button>
                         </div>

                         <!-- Step 2: Location -->
                         <div class="step d-none">
                              <div class="mb-3">
                                   <label for="location" class="form-label">Lieu de l'élevage</label>
                                   <input type="text" class="form-control" id="location" name="location" placeholder="Entrez l'emplacement de l'élevage" required>
                              </div>

                              <div class="mb-3">
                                   <label for="contactNumber" class="form-label">Numéro de contact</label>
                                   <input type="text" class="form-control" id="contactNumber" name="contactNumber" placeholder="Entrez votre numéro de contact">
                              </div>

                              <button type="button" class="btn btn-secondary prev-btn">Précédent</button>
                              <button type="button" class="btn btn-primary next-btn">Suivant</button>
                         </div>

                         <!-- Step 3: Upload Images -->
                         <div class="step d-none">
                              <div class="mb-3">
                                   <label for="profileImage" class="form-label">Image de Profil</label>
                                   <input type="file" class="form-control" id="profileImage" name="profileImage" accept="image/*">
                              </div>

                              <div class="mb-3">
                                   <label for="coverImage" class="form-label">Image de Couverture</label>
                                   <input type="file" class="form-control" id="coverImage" name="coverImage" accept="image/*">
                              </div>

                              <div class="mb-3">
                                   <label for="website" class="form-label">Site Web (facultatif)</label>
                                   <input type="text" class="form-control" id="website" name="website" placeholder="Entrez l'URL de votre site Web (facultatif)">
                              </div>

                              <button type="button" class="btn btn-secondary prev-btn">Précédent</button>
                              <button type="submit" class="btn btn-success">Créer l'élevage</button>
                         </div>
                    </form>
               </div>

               <!-- Live Preview Section -->
               <div class="col-lg-6 d-none d-lg-block">
                    <div class="card shadow-sm">
                         <div class="profile-header">
                              <div class="cover-image-wrapper">
                                   <img id="preview-coverImage" src="https://via.placeholder.com/600x200" alt="Cover Image" class="img-fluid">
                              </div>
                              <div class="d-flex align-items-center mt-3">
                                   <div class="profile-image-wrapper me-3">
                                        <img id="preview-profileImage" src="https://via.placeholder.com/100" alt="Profile Image" class="rounded-circle img-thumbnail" style="width: 100px; height: 100px;">
                                   </div>
                                   <div class="profile-info">
                                        <h3 id="preview-name">Nom de l'élevage</h3>
                                   </div>
                              </div>
                         </div>
                         <div class="card-body">
                              <h5>Informations:</h5>
                              <p><strong>Lieu:</strong> <span id="preview-location">Lieu de l'élevage</span></p>
                              <p><strong>Numéro de contact:</strong> <span id="preview-contactNumber">Numéro de contact</span></p>
                              <p><strong>Site Web:</strong> <span id="preview-website">www.exemple.com</span></p>
                         </div>
                    </div>
               </div>
          </div>
     </div>

     <!-- Include Bootstrap JS and jQuery -->
     <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
     <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>

     <script>
          $(document).ready(function () {
               let currentStep = 0;
               const steps = $(".step");
               const progressBar = $("#progressBar");
               const stepLabels = ["Étape 1", "Étape 2", "Étape 3"];

               // Show the current step
               function showStep(step) {
                    steps.addClass("d-none");
                    $(steps[step]).removeClass("d-none");

                    const progress = (step + 1) * (100 / steps.length);
                    progressBar.css("width", progress + "%").text(stepLabels[step]);
               }

               // Next button click event
               $(".next-btn").click(function () {
                    if (currentStep < steps.length - 1) {
                         currentStep++;
                         showStep(currentStep);
                    }
               });

               // Previous button click event
               $(".prev-btn").click(function () {
                    if (currentStep > 0) {
                         currentStep--;
                         showStep(currentStep);
                    }
               });

               // Show the first step
               showStep(currentStep);

               // Real-time preview updates
               $('#name').on('input', function () {
                    $('#preview-name').text($(this).val() || "Nom de l'élevage");
               });

               $('#description').on('input', function () {
                    $('#preview-description').text($(this).val() || "Description de l'élevage");
               });

               $('#location').on('input', function () {
                    $('#preview-location').text($(this).val() || "Lieu de l'élevage");
               });

               $('#contactNumber').on('input', function () {
                    $('#preview-contactNumber').text($(this).val() || "Numéro de contact");
               });

               $('#website').on('input', function () {
                    $('#preview-website').text($(this).val() || "www.exemple.com");
               });

               // Real-time image preview
               $('#profileImage').on('change', function () {
                    const file = this.files[0];
                    if (file) {
                         const reader = new FileReader();
                         reader.onload = function (e) {
                              $('#preview-profileImage').attr('src', e.target.result);
                         };
                         reader.readAsDataURL(file);
                    }
               });

               $('#coverImage').on('change', function () {
                    const file = this.files[0];
                    if (file) {
                         const reader = new FileReader();
                         reader.onload = function (e) {
                              $('#preview-coverImage').attr('src', e.target.result);
                         };
                         reader.readAsDataURL(file);
                    }
               });
          });
     </script>
     <b> <br><br></b>
     <%- include('./partials/footer') %>