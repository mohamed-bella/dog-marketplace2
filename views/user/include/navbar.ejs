<nav x-data="{ mobileMenuOpen: false, searchOpen: false }" class="fixed top-0 left-0 right-0 z-50 bg-white border-b border-gray-200">
     <!-- Main Navbar Content -->
     <div class="max-w-7xl mx-auto px-4">
          <div class="flex h-14 items-center justify-between">
               <!-- Left: Logo Section -->
               <a href="/" class="flex items-center gap-2 flex-shrink-0">
                    <div class="w-8 h-8 rounded-lg flex items-center justify-center">
                         <img src="https://ndressilik.s3.eu-north-1.amazonaws.com/users/67338636f84bd237e37a39a6/gallery/1731497935188_ndressilikLogoTopNavbar.png" alt="" srcset="">
                    </div>
                    <span class="font-bold hidden sm:block">NDRESSILIK</span>
               </a>

               <!-- Center: Navigation -->
               <div class="hidden md:flex items-center gap-1">
                    <% const navItems=[ { label: 'Accueil' , icon: 'home' , href: '/' }, { label: 'Services' , icon: 'concierge-bell' , href: '/services' }, { label: 'Analyser race' , icon: 'starts' , href: '/dog-breeds-analyzer' }, ] %>

                         <% navItems.forEach(item=> { %>
                              <a href="<%= item.href %>" class="flex items-center gap-2 px-4 h-14 text-sm font-semibold text-gray-700 hover:bg-gray-50 
                                   relative group transition-colors">
                                   <i class="fas fa-<%= item.icon %> text-lg 
                                        group-hover:text-[#58CC02] transition-colors"></i>
                                   <span class="group-hover:text-[#58CC02]">
                                        <%= item.label %>
                                   </span>
                                   <div class="absolute bottom-0 left-0 right-0 h-0.5 bg-[#58CC02] scale-x-0 
                                        group-hover:scale-x-100 transition-transform origin-left"></div>
                              </a>
                              <% }) %>
               </div>

               <!-- Right: Actions -->
               <div class="flex items-center gap-2">
                    <!-- Search Button -->
                    <button @click="searchOpen = true" class="p-2 text-gray-700 hover:bg-gray-50 rounded-lg transition-colors">
                         <i class="fas fa-search text-lg"></i>
                    </button>

                    <!-- Add Service Button -->
                    <% if (user) { %>
                         <a href="/dashboard/new-service" class="flex items-center gap-2 px-4 py-2 bg-[#ffc300] hover:bg-[#46a702] text-white 
                                   font-bold text-sm rounded-xl transition-colors shadow-sm">
                              <i class="fas fa-plus"></i>
                              <span>Service</span>
                         </a>

                         <!-- User Menu -->
                         <div class="relative" x-data="{ open: false }">
                              <button @click="open = !open" class="flex items-center gap-2 p-1 hover:bg-gray-50 rounded-lg transition-colors">
                                   <img src="<%= user.profileImage || `/default-avatar.png` %>" class="w-8 h-8 rounded-lg object-cover" alt="<%= user.displayName %>">
                                   <i class="fas fa-chevron-down text-sm text-gray-500"></i>
                              </button>

                              <!-- Dropdown -->
                              <div x-show="open" @click.away="open = false" class="absolute right-0 mt-2 w-60 bg-white rounded-2xl shadow-lg border border-gray-200
                                          divide-y divide-gray-100">
                                   <!-- User Info -->
                                   <div class="p-3">
                                        <div class="font-semibold">
                                             <%= user.displayName %>
                                        </div>
                                        <div class="text-sm text-gray-500">
                                             <%= user.email %>
                                        </div>
                                   </div>

                                   <!-- Menu Items -->
                                   <div class="p-2 space-y-1">
                                        <a href="/dashboard" class="flex items-center gap-3 px-3 py-2 text-sm text-gray-700 
                                                                  hover:bg-gray-50 rounded-lg transition-colors">
                                             <i class="fas fa-chart-line w-5"></i>
                                             <span>Tableau de bord</span>
                                        </a>
                                        <a href="/profile" class="flex items-center gap-3 px-3 py-2 text-sm text-gray-700 
                                                                 hover:bg-gray-50 rounded-lg transition-colors">
                                             <i class="fas fa-user w-5"></i>
                                             <span>Profile</span>
                                        </a>
                                   </div>

                                   <!-- Logout -->
                                   <div class="p-2">
                                        <a href="/logout" class="flex items-center gap-3 px-3 py-2 text-sm text-red-600 
                                                               hover:bg-red-50 rounded-lg transition-colors">
                                             <i class="fas fa-sign-out-alt w-5"></i>
                                             <span>Déconnexion</span>
                                        </a>
                                   </div>
                              </div>
                         </div>
                         <% } else { %>
                              <!-- Login Button -->
                              <a href="/auth/google" class="flex items-center gap-2 px-4 py-2 bg-[#ffc300] hover:bg-[#ffc300] text-white 
                                   font-bold text-sm rounded-xl transition-colors shadow-sm">
                                   <i class="fab fa-plus"></i>
                                   <span>Service</span>
                              </a>
                              <% } %>

                                   <!-- Mobile Menu Button -->
                                   <button @click="mobileMenuOpen = !mobileMenuOpen" class="md:hidden p-2 text-gray-700 hover:bg-gray-50 rounded-lg transition-colors">
                                        <i class="fas fa-bars text-lg"></i>
                                   </button>
               </div>
          </div>
     </div>

     <!-- Search Modal -->
     <div x-show="searchOpen" x-transition:enter="transition ease-out duration-200" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave="transition ease-in duration-150" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0" class="fixed inset-0 z-50 bg-white">
          <!-- Search Header -->
          <div class="border-b border-gray-200">
               <div class="max-w-7xl mx-auto px-4">
                    <div class="flex h-14 items-center gap-4">
                         <i class="fas fa-search text-gray-400"></i>
                         <input type="text" placeholder="Rechercher..." class="flex-1 h-full bg-transparent text-gray-900 placeholder-gray-500 focus:outline-none" @keydown.escape="searchOpen = false" autofocus>
                         <button @click="searchOpen = false" class="p-2 text-gray-500 hover:text-gray-700">
                              <i class="fas fa-times text-lg"></i>
                         </button>
                    </div>
               </div>
          </div>

          <!-- Search Content -->
          <div class="max-w-7xl mx-auto px-4 py-6">
               <!-- Popular Searches -->
               <div class="space-y-4">
                    <h3 class="text-sm font-medium text-gray-500">Recherches populaires</h3>
                    <div class="flex flex-wrap gap-2">
                         <% ['Dressage', 'Toilettage' , 'Promenade' , 'Vétérinaire' ].forEach(term=> { %>
                              <a href="/search?q=<%= term %>" class="px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 text-sm 
                                        rounded-full transition-colors">
                                   <%= term %>
                              </a>
                              <% }) %>
                    </div>
               </div>
          </div>
     </div>

     <!-- Mobile Menu -->
     <div x-show="mobileMenuOpen" x-transition:enter="transition ease-out duration-200" x-transition:enter-start="opacity-0 -translate-y-2" x-transition:enter-end="opacity-100 translate-y-0" x-transition:leave="transition ease-in duration-150" x-transition:leave-start="opacity-100 translate-y-0" x-transition:leave-end="opacity-0 -translate-y-2" @click.away="mobileMenuOpen = false" class="md:hidden border-t border-gray-200">
          <nav class="max-w-7xl mx-auto px-4 py-3">
               <div class="space-y-1">
                    <% navItems.forEach(item=> { %>
                         <a href="<%= item.href %>" class="flex items-center gap-3 px-3 py-2 text-gray-700 hover:bg-gray-50 rounded-lg transition-colors">
                              <i class="fas fa-<%= item.icon %> text-gray-400 w-5"></i>
                              <span>
                                   <%= item.label %>
                              </span>
                         </a>
                         <% }) %>
               </div>
          </nav>
     </div>
</nav>

<style>
     /* Body spacing for fixed navbar */
     body {
          padding-top: 3.5rem;
     }

     /* Smooth transitions */
     .transition-transform {
          transition-property: transform;
          transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
          transition-duration: 200ms;
     }

     /* Better mobile tap targets */
     @media (max-width: 768px) {
          .nav-link {
               min-height: 44px;
          }
     }

     /* Remove touch highlight on mobile */
     * {
          -webkit-tap-highlight-color: transparent;
     }
</style>